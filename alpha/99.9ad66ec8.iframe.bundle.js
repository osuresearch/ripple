"use strict";(self.webpackChunk_osuresearch_ripple=self.webpackChunk_osuresearch_ripple||[]).push([[99],{"./src/components/AutolayoutPage/AutolayoutPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>AutolayoutPage});__webpack_require__("./node_modules/react/index.js");var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),_hooks_usePageContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/usePageContext.ts"),_Field__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Field/index.ts"),_Page__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Page/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Content(){const{page}=(0,_hooks_usePageContext__WEBPACK_IMPORTED_MODULE_1__.l)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_5__.Kq,{align:"stretch",gap:"xl",py:"lg",children:Object.keys(page.fields).map((name=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Field__WEBPACK_IMPORTED_MODULE_2__.g,{name},name)))})}function AutolayoutPage({name}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Page__WEBPACK_IMPORTED_MODULE_3__.T,{name,withHeader:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Content,{})})}Content.displayName="Content",AutolayoutPage.displayName="AutolayoutPage";try{AutolayoutPage.displayName="AutolayoutPage",AutolayoutPage.__docgenInfo={description:"",displayName:"AutolayoutPage",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AutolayoutPage/AutolayoutPage.tsx#AutolayoutPage"]={docgenInfo:AutolayoutPage.__docgenInfo,name:"AutolayoutPage",path:"src/components/AutolayoutPage/AutolayoutPage.tsx#AutolayoutPage"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Debugger/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>Debugger});var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),hooks=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/hooks/index.ts")),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Debugger(){const{watch,formState:{touchedFields,dirtyFields,errors,defaultValues},getValues}=(0,hooks.CO)(),watched=watch();return(0,jsx_runtime.jsxs)(index_module.Kq,{miw:300,w:300,style:{overflowX:"auto"},children:[(0,jsx_runtime.jsx)(index_module.X6,{level:3,children:"RHF"}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"watched"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(watched,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.touchedFields"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(touchedFields,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.dirtyFields"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(dirtyFields,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.errors"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(errors,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.defaultValues"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(defaultValues,void 0,2)})]})}Debugger.displayName="Debugger"},"./src/components/Form/Form.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>Form});var react=__webpack_require__("./node_modules/react/index.js"),useRippleContext=__webpack_require__("./src/hooks/useRippleContext.ts"),FormProvider=__webpack_require__("./src/components/FormProvider/index.ts"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),hooks=__webpack_require__("./src/hooks/index.ts"),index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),settings=__webpack_require__("./src/features/settings.ts"),Debugger=__webpack_require__("./src/components/Debugger/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Aside(){const showComments=(0,hooks.ry)((state=>state.settings.showComments)),dispatch=(0,hooks.NV)();return(0,jsx_runtime.jsxs)(index_module.Kq,{p:"md",align:"end",children:[(0,jsx_runtime.jsx)(index_module.hU,{name:"bars",size:24,label:"Toggle navigation",onPress:()=>dispatch((0,settings.u0)(!showComments))}),showComments&&(0,jsx_runtime.jsx)(index_module.xr,{h:"100px",w:"100%",miw:350,type:"hover",style:{flexGrow:1},hideDelay:1e3,children:(0,jsx_runtime.jsx)(Debugger.q,{})})]})}Aside.displayName="Aside";var Debug=__webpack_require__("./src/components/Debug/index.ts");function MemoryRouterEditor(){const location=(0,dist.TH)(),navigate=(0,dist.s0)(),[value,setValue]=(0,react.useState)();(0,react.useEffect)((()=>{const url=location.pathname+location.search+location.hash;url!==value&&setValue(url)}),[location]);return(0,jsx_runtime.jsxs)(index_module.Kq,{gap:0,pb:"md",children:[(0,jsx_runtime.jsx)(index_module.xv,{fs:"xs",children:"MemoryRouter Navigation"}),(0,jsx_runtime.jsx)(index_module.nv,{w:"100%",name:"address","aria-label":"Address",value,onChange:setValue,leftSlot:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_module.hU,{name:"chevron",iconProps:{rotate:180},label:"Back",onPress:()=>{navigate(-1)},size:32}),(0,jsx_runtime.jsx)(index_module.hU,{name:"chevron",label:"Forward",onPress:()=>{navigate(1)},size:32})]}),leftWidth:80,rightSlot:(0,jsx_runtime.jsx)(index_module.zx,{h:"100%",onPress:()=>{value&&navigate(value)},children:"Go"})})]})}MemoryRouterEditor.displayName="MemoryRouterEditor";try{MemoryRouterEditor.displayName="MemoryRouterEditor",MemoryRouterEditor.__docgenInfo={description:"Mocks a browser navigation bar for React Router's MemoryRouter.\n\nMostly for testing and mocking routing within Storybook.",displayName:"MemoryRouterEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MemoryRouterEditor/MemoryRouterEditor.tsx#MemoryRouterEditor"]={docgenInfo:MemoryRouterEditor.__docgenInfo,name:"MemoryRouterEditor",path:"src/components/MemoryRouterEditor/MemoryRouterEditor.tsx#MemoryRouterEditor"})}catch(__react_docgen_typescript_loader_error){}var react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js");const StyledNavLink=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div`
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  padding-left: 4px;
  margin-left: -4px;

  color: ${props=>props.isHidden?"var(--rui-dark)":props.isActive?"var(--rui-primary)":"var(--rui-light-contrast)"};

  box-shadow: ${props=>props.isActive?"-4px 0px 0px 0px var(--rui-primary)":"none"};
`;function PageNavLink({name,children}){const{form}=(0,hooks.CO)(),definition=form.pages[name],showConditions=(0,hooks.ry)((state=>state.settings.showConditions)),{passed,error,fields,references}=(0,hooks.kY)(definition.condition);return definition?showConditions||passed?(0,jsx_runtime.jsx)(index_module.tE,{children:(0,jsx_runtime.jsxs)(index_module.ZA,{w:300,justify:"apart",px:"xs",children:[(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:"#/"+name,style:{maxWidth:250},children:({isActive})=>(0,jsx_runtime.jsxs)(StyledNavLink,{isActive:window.location.hash==="#/"+name,isHidden:!passed,children:[definition.title," ",children]})}),showConditions&&definition.condition&&(0,jsx_runtime.jsx)(index_module.u,{contentSlot:"This page is conditionally displayed",delay:0,placement:"left",children:(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:"#/"+name,children:(0,jsx_runtime.jsx)(index_module.JO,{size:20,name:passed?"eye":"eyeSlash",c:"error","aria-label":"Conditional"})})})]})}):null:(0,jsx_runtime.jsxs)(index_module.xu,{bgc:"error",c:"error-contrast",p:"xs",children:["Missing page '",name,"'"]})}function TableOfContents(){const{form}=(0,hooks.CO)(),[visible,setVisible]=(0,react.useState)(!0),layoutMode=(0,hooks.ry)((state=>state.settings.layoutMode));if("Paged"===layoutMode)return(0,jsx_runtime.jsxs)(index_module.Kq,{p:"md",children:[(0,jsx_runtime.jsx)(index_module.hU,{name:"bars",size:24,label:"Toggle navigation",onPress:()=>setVisible(!visible)}),visible&&(0,jsx_runtime.jsx)(index_module.xr,{h:"100px",type:"hover",style:{flexGrow:1},hideDelay:1e3,children:(0,jsx_runtime.jsxs)(index_module.Kq,{gap:"xs",children:[(0,jsx_runtime.jsx)(index_module.xv,{c:"dark",fw:"bold",fs:"sm",children:"Outline"}),Object.keys(form.pages).map((name=>(0,jsx_runtime.jsx)(PageNavLink,{name},name)))]})})]});if("Single"===layoutMode)return(0,jsx_runtime.jsxs)(index_module.Kq,{miw:500,children:["TODO: Single page navigation links.",Object.keys(form.pages).map((name=>(0,jsx_runtime.jsx)(index_module.rU,{href:"#ripple-page-"+name,children:form.pages[name].title},name)))]});throw new Error("Unhandled layout mode: "+layoutMode)}function Content(){const{form,handleSubmit,getValues,getPreviousPage,getNextPage,formState:{errors,dirtyFields,touchedFields,defaultValues}}=(0,hooks.CO)();return(0,jsx_runtime.jsxs)(index_module.ZA,{bgc:"light",grow:!0,align:"stretch",gap:0,mih:"100vh",children:[(0,jsx_runtime.jsx)(TableOfContents,{}),(0,jsx_runtime.jsxs)(index_module.Xk,{w:815,miw:815,bgc:"light-tint",my:"xxl",p:"xxl",shadow:"sm",children:[(0,jsx_runtime.jsx)(Debug.c,{children:(0,jsx_runtime.jsx)(MemoryRouterEditor,{})}),(0,jsx_runtime.jsx)(dist.j3,{})]}),(0,jsx_runtime.jsx)(Aside,{})]})}function ErrorBoundary(){const error=(0,dist.lk)(),location=(0,dist.TH)();return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h1",{children:"Oops!"}),(0,jsx_runtime.jsx)("p",{children:"Sorry, an unexpected error has occurred."}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("i",{children:error.statusText||error.message})}),(0,jsx_runtime.jsxs)("p",{children:["Location: ",JSON.stringify(location)]})]})}function PageNotFound(){return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:"Page not found"}),(0,jsx_runtime.jsx)(index_module.xv,{children:"Whoops"})]})}PageNavLink.displayName="PageNavLink",Content.displayName="Content",ErrorBoundary.displayName="ErrorBoundary",PageNotFound.displayName="PageNotFound";try{PageNotFound.displayName="PageNotFound",PageNotFound.__docgenInfo={description:"404 content for when the user tries to access a missing page / subpage.",displayName:"PageNotFound",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PageNotFound/PageNotFound.tsx#PageNotFound"]={docgenInfo:PageNotFound.__docgenInfo,name:"PageNotFound",path:"src/components/PageNotFound/PageNotFound.tsx#PageNotFound"})}catch(__react_docgen_typescript_loader_error){}var AutolayoutPage=__webpack_require__("./src/components/AutolayoutPage/AutolayoutPage.tsx"),tools=__webpack_require__("./src/tools/index.ts");function addChildCollectionRoutes(page){return page?(0,tools.r0)(page).map((name=>({path:name,element:(0,jsx_runtime.jsxs)("div",{children:["TODO: instance of ",name]}),children:addChildCollectionRoutes(page.fields[name].template)}))):[]}function FormRouter({children,renderContainer}){const{form}=(0,hooks.CO)(),pageNames=Object.keys(form.pages),overrides={};react.Children.forEach(children,(child=>{const isPage=react.isValidElement(child)&&"page"===child.type,isAutolayoutPage=react.isValidElement(child)&&"autolayoutpage"===child.type;(isPage||isAutolayoutPage)&&(overrides[child.props.name]=child)}));const routes=[];pageNames.forEach((name=>{routes.push({path:name,element:name in overrides?overrides[name]:(0,jsx_runtime.jsx)(AutolayoutPage.S,{name}),children:addChildCollectionRoutes(form.pages[name])})})),routes.push({...routes[0],path:""});const router=(0,dist.bi)([{path:"/",errorElement:(0,jsx_runtime.jsx)(ErrorBoundary,{}),element:(0,jsx_runtime.jsx)("div",{children:renderContainer?renderContainer({children:(0,jsx_runtime.jsx)(dist.j3,{})}):(0,jsx_runtime.jsx)(dist.j3,{})}),children:routes}]);return(0,jsx_runtime.jsx)(dist.pG,{router})}FormRouter.displayName="FormRouter";try{FormRouter.displayName="FormRouter",FormRouter.__docgenInfo={description:"",displayName:"FormRouter",props:{renderContainer:{defaultValue:null,description:"Container element around all pages",name:"renderContainer",required:!1,type:{name:"((props: { children: ReactNode; }) => ReactNode)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormRouter/FormRouter.tsx#FormRouter"]={docgenInfo:FormRouter.__docgenInfo,name:"FormRouter",path:"src/components/FormRouter/FormRouter.tsx#FormRouter"})}catch(__react_docgen_typescript_loader_error){}function FormWrapper({children}){const{handleSubmit,formState:{errors,dirtyFields,touchedFields,defaultValues}}=(0,useRippleContext.C)();return(0,jsx_runtime.jsx)("form",{onSubmit:handleSubmit((data=>console.log(data))),children:(0,jsx_runtime.jsx)(FormRouter,{renderContainer:({children})=>(0,jsx_runtime.jsxs)(index_module.ZA,{children:[(0,jsx_runtime.jsx)(TableOfContents,{}),(0,jsx_runtime.jsxs)(index_module.Kq,{children:[(0,jsx_runtime.jsx)(MemoryRouterEditor,{}),children]})]}),children})})}function Form({children,...providerProps}){return(0,jsx_runtime.jsx)(FormProvider.R,{...providerProps,children:(0,jsx_runtime.jsx)(FormWrapper,{children})})}FormWrapper.displayName="FormWrapper",Form.displayName="Form";try{Form.displayName="Form",Form.__docgenInfo={description:"",displayName:"Form",props:{form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"FormDefinition"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"Partial<RippleOptions>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/Form.tsx#Form"]={docgenInfo:Form.__docgenInfo,name:"Form",path:"src/components/Form/Form.tsx#Form"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Page/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>Page});var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),styled_components_browser_esm=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),useRippleContext=__webpack_require__("./src/hooks/useRippleContext.ts"),Conditional=__webpack_require__("./src/components/Conditional/index.ts"),usePageContext=__webpack_require__("./src/hooks/usePageContext.ts"),Debug=__webpack_require__("./src/components/Debug/index.ts"),Markdown=__webpack_require__("./src/components/Markdown/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function PageHeader({name,page,errors}){return(0,jsx_runtime.jsxs)(index_module.xu,{children:[(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:(0,jsx_runtime.jsx)(index_module.fO,{id:"ripple-page-"+name,children:page.title})}),page.description&&(0,jsx_runtime.jsx)(index_module.Xk,{px:"lg",pt:"lg",pb:"sm",bgc:"light",shadow:"sm",withBorder:!0,children:(0,jsx_runtime.jsx)(Markdown.U,{text:page.description})}),(0,jsx_runtime.jsx)(index_module._o,{errorMessages:errors})]})}PageHeader.displayName="PageHeader";try{PageHeader.displayName="PageHeader",PageHeader.__docgenInfo={description:"View for page title, description, and error messages.\n\nThis is rendered automatically when using an `<AutolayoutPage>`\nor a `<Page>` with the header enabled.",displayName:"PageHeader",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"PageDefinition"}},errors:{defaultValue:null,description:"",name:"errors",required:!1,type:{name:"ErrorList"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PageHeader/PageHeader.tsx#PageHeader"]={docgenInfo:PageHeader.__docgenInfo,name:"PageHeader",path:"src/components/PageHeader/PageHeader.tsx#PageHeader"})}catch(__react_docgen_typescript_loader_error){}var hooks=__webpack_require__("./src/hooks/index.ts");function Pagination({current}){const{getPreviousPage,getNextPage}=(0,hooks.CO)(),prev=getPreviousPage(current),next=getNextPage(current);return(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",w:"100%",children:[!prev&&(0,jsx_runtime.jsx)(index_module.xu,{w:"100%"}),prev&&(0,jsx_runtime.jsx)(index_module.vt,{as:"a",href:"#/"+prev.name,direction:"previous",children:prev.definition.title}),next&&(0,jsx_runtime.jsx)(index_module.vt,{as:"a",href:"#/"+next.name,direction:"next",children:next.definition.title}),!next&&(0,jsx_runtime.jsx)(index_module.vt,{as:"a",href:"/submit",direction:"next",children:"Review & Submit"})]})}Pagination.displayName="Pagination";try{Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",displayName:"Pagination",props:{current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Pagination/Pagination.tsx#Pagination"]={docgenInfo:Pagination.__docgenInfo,name:"Pagination",path:"src/components/Pagination/Pagination.tsx#Pagination"})}catch(__react_docgen_typescript_loader_error){}function Content({name,withHeader,children}){const{page}=(0,usePageContext.l)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[withHeader&&(0,jsx_runtime.jsx)(PageHeader,{name,page,errors:{}}),children,(0,jsx_runtime.jsx)(Pagination,{current:name})]})}const DebugWrapper=styled_components_browser_esm.ZP.div`
  position: absolute;
  left: calc(100% - 30px);
  white-space: nowrap;
`;function Page(props){const{form}=(0,useRippleContext.C)(),{name}=props,page=form.pages[name];return page?(0,jsx_runtime.jsx)(usePageContext.z.Provider,{value:{name,page},children:(0,jsx_runtime.jsxs)(Conditional.h,{name,condition:page.condition,children:[(0,jsx_runtime.jsx)(Debug.c,{children:(0,jsx_runtime.jsx)(DebugWrapper,{children:(0,jsx_runtime.jsxs)(index_module.Af,{variant:"indicator",c:"green",children:["page.name: ",name]})})}),(0,jsx_runtime.jsx)(Content,{...props})]})}):(0,jsx_runtime.jsxs)(index_module.bZ,{variant:"error",title:"Page not found",children:["Page missing from form definition: ",name]})}Page.displayName="Page";try{Page.displayName="Page",Page.__docgenInfo={description:"A page provides context for all child fields and handles\nautomatic layout rendering if `autolayout` is specified.\n\nPages control routing for nested collection fields that\nare displayed as sub-pages.\n\nIncludes route paths:\n- `/`: The current page\n- `:fieldName/*`: A collection instance sub-page",displayName:"Page",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},withHeader:{defaultValue:null,description:"",name:"withHeader",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Page/Page.tsx#Page"]={docgenInfo:Page.__docgenInfo,name:"Page",path:"src/components/Page/Page.tsx#Page"})}catch(__react_docgen_typescript_loader_error){}}}]);
//# sourceMappingURL=99.9ad66ec8.iframe.bundle.js.map