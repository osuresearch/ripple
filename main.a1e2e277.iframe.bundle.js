/*! For license information please see main.a1e2e277.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_osuresearch_ripple=self.webpackChunk_osuresearch_ripple||[]).push([[179],{"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>preview_namedExportsOrder,decorators:()=>decorators,parameters:()=>parameters});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/storybook-dark-mode/dist/esm/index.js")),blocks=(__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/@storybook/addon-docs/blocks.js")),dist_esm=__webpack_require__("./node_modules/@storybook/theming/dist/esm/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),DocsContainer=function DocsContainer(_ref){var children=_ref.children,context=_ref.context,dark=(0,esm.vs)();return(0,jsx_runtime.jsx)(blocks.Zu,{context:Object.assign({},context,{storyById:function storyById(id){var _storyContext$paramet,storyContext=context.storyById(id);return Object.assign({},storyContext,{parameters:Object.assign({},null==storyContext?void 0:storyContext.parameters,{docs:Object.assign({},null==storyContext||null===(_storyContext$paramet=storyContext.parameters)||void 0===_storyContext$paramet?void 0:_storyContext$paramet.docs,{theme:dark?dist_esm.np.dark:dist_esm.np.light})})})}}),children})};DocsContainer.displayName="DocsContainer";DocsContainer.__docgenInfo={description:"",methods:[],displayName:"DocsContainer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/DocsContainer.js"]={name:"DocsContainer",docgenInfo:DocsContainer.__docgenInfo,path:".storybook/DocsContainer.js"});var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),parameters=(__webpack_require__("./node_modules/@osuresearch/ui/dist/index.css"),{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},viewMode:"docs",docs:{container:DocsContainer}}),decorators=[function(Story){return(0,jsx_runtime.jsx)(index_module.tL,{theme:(0,esm.vs)()?"dark":"light",children:(0,jsx_runtime.jsx)(Story,{})})}],preview_namedExportsOrder=["parameters","decorators"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/components/ExternalDocument/ExternalDocument.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Simple:()=>Simple,StressTest:()=>StressTest,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ExternalDocument_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js");var react=__webpack_require__("./node_modules/react/index.js"),index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),lib=__webpack_require__("./node_modules/react-frame-component/lib/index.js"),Comments=__webpack_require__("./src/components/Comments/index.ts"),useCommentingContext=__webpack_require__("./src/hooks/useCommentingContext.ts"),react_dom=(__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/react-dom/index.js")),dist_module=(__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/@react-aria/focus/dist/module.js")),dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),starter_kit_dist=__webpack_require__("./node_modules/@tiptap/starter-kit/dist/index.js"),comment=__webpack_require__("./src/components/TextEditor/comment.ts"),core_dist=(__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/@tiptap/core/dist/index.js")),CommentFocus=core_dist.vc.create({name:"comment-focus",addOptions:function addOptions(){return{HTMLAttributes:{}}},addAttributes:function addAttributes(){return{comment:{default:null,parseHTML:function parseHTML(el){return el.getAttribute("data-comment")},renderHTML:function renderHTML(attrs){return{"data-comment":attrs.comment}}}}},parseHTML:function parseHTML(){return[{tag:"comment-view[data-comment]",getAttrs:function getAttrs(el){var _el$getAttribute;return!(null===(_el$getAttribute=el.getAttribute("data-comment"))||void 0===_el$getAttribute||!_el$getAttribute.trim())&&null}}]},renderHTML:function renderHTML(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["comment-focus-view",(0,core_dist.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function addCommands(){return{setCommentFocus:function setCommentFocus(comment){return function(_ref2){return _ref2.commands.setMark("comment-focus",{comment})}},toggleCommentFocus:function toggleCommentFocus(){return function(_ref3){return _ref3.commands.toggleMark("comment-focus")}},unsetCommentFocus:function unsetCommentFocus(){return function(_ref4){return _ref4.commands.unsetMark("comment-focus")}}}}}),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ReviewPopover(_ref){var coords=_ref.coords,onAddComment=_ref.onAddComment;return(0,jsx_runtime.jsx)("button",{style:{position:"absolute",top:coords.y-24,left:coords.x},onClick:onAddComment,children:"ðŸ’¬ Comment"})}ReviewPopover.displayName="ReviewPopover";try{ReviewPopover.displayName="ReviewPopover",ReviewPopover.__docgenInfo={description:"",displayName:"ReviewPopover",props:{coords:{defaultValue:null,description:"",name:"coords",required:!0,type:{name:"Rect"}},onAddComment:{defaultValue:null,description:"",name:"onAddComment",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/ReviewPopover.tsx#ReviewPopover"]={docgenInfo:ReviewPopover.__docgenInfo,name:"ReviewPopover",path:"src/components/ExternalDocument/ReviewPopover.tsx#ReviewPopover"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./src/react/utils.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function rectAtPos(window,editor,from){var pos=editor.view.coordsAtPos(from);return{x:pos.left,y:pos.top+window.scrollY,width:0,height:pos.bottom-pos.top}}var Reviewable=(0,react.forwardRef)((function(_ref,ref){var name=_ref.name,content=_ref.content,_useState2=_slicedToArray((0,react.useState)(!1),2),isTextSelected=_useState2[0],setIsTextSelected=_useState2[1],_useFrame=(0,lib.xQ)(),window=_useFrame.window,_useCommentingContext=(_useFrame.document,(0,useCommentingContext.g)()),threads=_useCommentingContext.threads,focused=_useCommentingContext.focused,startThread=_useCommentingContext.startThread,focusThread=_useCommentingContext.focusThread,_useState4=(_useCommentingContext.clearFocus,_slicedToArray((0,react.useState)([]),2)),threadIds=_useState4[0],setThreadIds=_useState4[1],_useState6=_slicedToArray((0,react.useState)(),2),selectionCoords=_useState6[0],setSelectionCoords=_useState6[1],_useState8=_slicedToArray((0,react.useState)(),2),setActiveMark=(_useState8[0],_useState8[1]),editor=(0,dist.jE)({extensions:[starter_kit_dist.Z.configure({history:!1}),comment.s.configure({}),CommentFocus.configure({})],onSelectionUpdate:function onSelectionUpdate(_ref2){var editor=_ref2.editor;checkForUpdatedSelection(editor)},onBlur:function onBlur(_ref3){_ref3.editor},editorProps:{attributes:{spellcheck:"false",tabindex:"0"}},content,editable:!1});(0,react.useEffect)((function(){if(editor){var ids=new Set;threads.forEach((function(t){return t.context.field===name&&ids.add(t.id)})),setThreadIds(Array.from(ids))}}),[editor]);var checkForUpdatedSelection=function checkForUpdatedSelection(editor){var _editor$state$selecti=editor.state.selection,from=_editor$state$selecti.from,to=_editor$state$selecti.to,empty=_editor$state$selecti.empty,mark=(_editor$state$selecti.$from,_editor$state$selecti.$head,_editor$state$selecti.$anchor,editor.isActive("comment"));if(!editor.isActive("comment-focus")){if(!empty&&to-from>1)return setSelectionCoords(rectAtPos(window,editor,from)),void setIsTextSelected(!0);if(mark&&editor.isFocused){var id=editor.getAttributes("comment").comment;focusThread(id)}setSelectionCoords(void 0),setIsTextSelected(!1)}},_useState10=_slicedToArray((0,react.useState)(0),2),markCount=_useState10[0],setMarkCount=_useState10[1];(0,react.useEffect)((function(){if(editor){var trackedThreads=threads.filter((function(t){return threadIds.includes(t.id)})),totalVisible=0;trackedThreads.forEach((function(t){t.deleted||t.resolved||totalVisible++})),totalVisible!==markCount&&(!function reapplyMarks(editor,threads){console.log("reapply marks",editor,threads);var commands=editor.chain().selectAll().unsetComment().unsetCommentFocus();threads.forEach((function(t){return!t.deleted&&!t.resolved&&commands.setTextSelection({from:t.context.from,to:t.context.to}).setComment(t.id)})),threads.forEach((function(t){return t.id===(null==focused?void 0:focused.id)&&commands.setTextSelection({from:t.context.from,to:t.context.to}).setCommentFocus(t.id)})),commands.setTextSelection(0).run()}(editor,trackedThreads),setMarkCount(totalVisible))}}),[editor,threads,threadIds]),(0,react.useEffect)((function(){if(editor){var commands=editor.chain().selectAll().unsetCommentFocus().setTextSelection(0);if(focused&&!focused.deleted&&focused.context.rect&&threadIds.includes(focused.id)){var pos=rectAtPos(window,editor,focused.context.from);setActiveMark(Object.assign({id:focused.id},pos)),commands.setTextSelection({from:focused.context.from,to:focused.context.to}).setCommentFocus(focused.id),scrollIntoView(pos)}else setActiveMark(void 0);commands.run()}}),[editor,threadIds,focused]);var scrollIntoView=function scrollIntoView(rect){window&&((0,utils.v)(window,rect)||window.scrollTo(rect.x,rect.y-100))},_useFocusRing=(0,dist_module.Fx)({within:!0}),isFocused=_useFocusRing.isFocused,focusProps=_useFocusRing.focusProps;return(0,jsx_runtime.jsxs)("div",Object.assign({ref,className:"ripple-reviewable"},focusProps,{children:[(0,jsx_runtime.jsx)(dist.kg,{editor}),isTextSelected&&selectionCoords&&isFocused&&(0,jsx_runtime.jsx)(ReviewPopover,{coords:selectionCoords,onAddComment:function addCommentOnSelection(){if(null!=editor&&editor.state.selection){var _editor$state$selecti2=editor.state.selection,from=_editor$state$selecti2.from,to=_editor$state$selecti2.to,empty=_editor$state$selecti2.empty,fromPos=(_editor$state$selecti2.$from,_editor$state$selecti2.$head,_editor$state$selecti2.$anchor,editor.view.coordsAtPos(from));if(setSelectionCoords({x:fromPos.left,y:fromPos.top,width:16,height:fromPos.bottom-fromPos.top}),!empty){editor.state.doc.textBetween(from,to," ");var _window$scrollY,_window$scrollY2,thread=startThread({field:name,from,to,rect:new DOMRect(fromPos.left,fromPos.top+(null!==(_window$scrollY=null==window?void 0:window.scrollY)&&void 0!==_window$scrollY?_window$scrollY:0),0,fromPos.bottom-fromPos.top+(null!==(_window$scrollY2=null==window?void 0:window.scrollY)&&void 0!==_window$scrollY2?_window$scrollY2:0))});setThreadIds((function(prev){return[].concat(_toConsumableArray(prev),[thread.id])}))}}setIsTextSelected(!1)}})]}))}));try{Reviewable.displayName="Reviewable",Reviewable.__docgenInfo={description:"A reviewable element can contain multiple selection ranges,\neach tied to a comment thread.\n\nNew threads can be added created by selecting new ranges,\nand clicking a range associated with a thread will focus\nthat thread for the user to interact with.\n\nTODO: Break this component down more. Anchor is a good candidate for some of this\n(at least the positioning pieces)",displayName:"Reviewable",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/Reviewable.tsx#Reviewable"]={docgenInfo:Reviewable.__docgenInfo,name:"Reviewable",path:"src/components/ExternalDocument/Reviewable.tsx#Reviewable"})}catch(__react_docgen_typescript_loader_error){}function Anchor_slicedToArray(arr,i){return function Anchor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Anchor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Anchor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Anchor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Anchor_arrayLikeToArray(o,minLen)}(arr,i)||function Anchor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Anchor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Anchor(_ref){var id=_ref.id,el=_ref.el,_useState2=Anchor_slicedToArray((0,react.useState)(),2),dom=_useState2[0],setDOM=_useState2[1],ref=(0,react.useRef)(null);return(0,react.useEffect)((function(){setDOM(el.innerHTML),el.innerHTML=""}),[el]),dom?(0,react_dom.createPortal)((0,jsx_runtime.jsx)(Reviewable,{ref,name:id,content:dom}),el):null}try{Anchor.displayName="Anchor",Anchor.__docgenInfo={description:"",displayName:"Anchor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}},el:{defaultValue:null,description:"",name:"el",required:!0,type:{name:"HTMLElement"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/Anchor.tsx#Anchor"]={docgenInfo:Anchor.__docgenInfo,name:"Anchor",path:"src/components/ExternalDocument/Anchor.tsx#Anchor"})}catch(__react_docgen_typescript_loader_error){}function Controller_slicedToArray(arr,i){return function Controller_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Controller_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Controller_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Controller_arrayLikeToArray(o,minLen)}(arr,i)||function Controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Controller_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Controller(){var document=(0,lib.xQ)().document,_useState2=Controller_slicedToArray((0,react.useState)([]),2),anchors=_useState2[0],setAnchors=_useState2[1];return document?((0,react.useEffect)((function(){if(document){var blocks=document.querySelectorAll("[data-comment-block]"),blockAnchors=[];blocks.forEach((function(el){blockAnchors.push({id:el.id,document,el})})),setAnchors(blockAnchors)}}),[document]),(0,jsx_runtime.jsx)("div",{children:anchors.map((function(anchorProps){return(0,jsx_runtime.jsx)(Anchor,Object.assign({},anchorProps),anchorProps.id)}))})):null}Controller.displayName="Controller";try{Controller.displayName="Controller",Controller.__docgenInfo={description:"Controller is injected into the iframe DOM for\nmanaging thread anchors and global states.",displayName:"Controller",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/Controller.tsx#Controller"]={docgenInfo:Controller.__docgenInfo,name:"Controller",path:"src/components/ExternalDocument/Controller.tsx#Controller"})}catch(__react_docgen_typescript_loader_error){}var STYLES="\n  comment-view[data-comment] {\n    background-color: yellow;\n  }\n\n  comment-focus-view[data-comment] {\n    background-color: gold;\n    text-decoration: underline;\n  }\n";function Debug(){var _useCommentingContext=(0,useCommentingContext.g)(),threads=_useCommentingContext.threads,focused=_useCommentingContext.focused;return(0,jsx_runtime.jsxs)(index_module.Kq,{children:[(0,jsx_runtime.jsx)(index_module.X6,{level:3,children:"ðŸ”§ Debug things"}),focused?"Focused thread: "+JSON.stringify(focused,void 0,2):"No focused thread",(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(threads,void 0,2)})]})}function ExternalDocument(props){return(0,jsx_runtime.jsxs)(index_module.ZA,{h:"800px",grow:!0,children:[(0,jsx_runtime.jsx)(lib.ZP,{height:"100%",initialContent:props.content,head:(0,jsx_runtime.jsx)("style",{children:STYLES}),children:(0,jsx_runtime.jsx)(Controller,{})}),(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",maw:400,mah:"100%",style:{overflowY:"scroll",overflowX:"hidden"},children:[(0,jsx_runtime.jsx)(Comments.H,{}),(0,jsx_runtime.jsx)(Debug,{})]})]})}Debug.displayName="Debug",ExternalDocument.displayName="ExternalDocument";try{ExternalDocument.displayName="ExternalDocument",ExternalDocument.__docgenInfo={description:"Container for a reviewable document that was generated through\nan external HTML renderer.\n\nDocument content is rendered within a controlled iframe\nand tagged elements are converted into controlled React\ncomponents through a portal.\n\n## ðŸ“– Storybook Dev Mode\n\nNote that running this in Storybook dev mode may occasionally break\ndue to hot reloading. The component is built to be mounted once.",displayName:"ExternalDocument",props:{content:{defaultValue:null,description:"DOM content to render as a reviewable document.\n\nThis cannot be changed once the component has mounted.",name:"content",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/ExternalDocument.tsx#ExternalDocument"]={docgenInfo:ExternalDocument.__docgenInfo,name:"ExternalDocument",path:"src/components/ExternalDocument/ExternalDocument.tsx#ExternalDocument"})}catch(__react_docgen_typescript_loader_error){}var useCommenting=__webpack_require__("./src/hooks/useCommenting.ts");function CommentsProvider(_ref){var children=_ref.children,initialThreads=_ref.initialThreads,ctx=(0,useCommenting.f)(initialThreads);return(0,jsx_runtime.jsx)(useCommenting._.Provider,{value:ctx,children})}CommentsProvider.displayName="CommentsProvider";try{CommentsProvider.displayName="CommentsProvider",CommentsProvider.__docgenInfo={description:"Thin wrapper around the useCommenting hook.\n\nTODO: Omit from library?",displayName:"CommentsProvider",props:{initialThreads:{defaultValue:null,description:"",name:"initialThreads",required:!1,type:{name:"Thread[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CommentsProvider/CommentsProvider.tsx#CommentsProvider"]={docgenInfo:CommentsProvider.__docgenInfo,name:"CommentsProvider",path:"src/components/CommentsProvider/CommentsProvider.tsx#CommentsProvider"})}catch(__react_docgen_typescript_loader_error){}var threads=[{id:"fada65f8-d995-4944-b552-4bec5cd19c28",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdf</p>",date:1677105268184,replies:[],context:{field:"section-0",from:556,to:614,rect:{x:197.8000030517578,y:305.3666687011719,width:0,height:17,top:305.3666687011719,right:197.8000030517578,bottom:322.3666687011719,left:197.8000030517578}}},{id:"a1560fa8-965d-4b8a-84af-dcc2eabf4b26",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdg</p>",date:1677105270127,replies:[],context:{field:"section-0",from:451,to:462,rect:{x:143.98333740234375,y:237.36666870117188,width:0,height:17,top:237.36666870117188,right:143.98333740234375,bottom:254.36666870117188,left:143.98333740234375}}},{id:"944fd074-4c0b-42f1-bc22-a6dc5983bf2a",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>adsg</p>",date:1677105271294,replies:[],context:{field:"section-0",from:397,to:411,rect:{x:219.5500030517578,y:203.36666870117188,width:0,height:17,top:203.36666870117188,right:219.5500030517578,bottom:220.36666870117188,left:219.5500030517578}}},{id:"93adf4e9-8741-459c-b18a-716b91c47165",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdg</p>",date:1677105272440,replies:[],context:{field:"section-0",from:278,to:298,rect:{x:281.79998779296875,y:151.36666870117188,width:0,height:17,top:151.36666870117188,right:281.79998779296875,bottom:168.36666870117188,left:281.79998779296875}}},{id:"7f65a8c8-4522-4154-833c-659289852ec9",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"",date:1677105273776,replies:[],context:{field:"section-0",from:41,to:190,rect:{x:270.66668701171875,y:81.36666870117188,width:0,height:17,top:81.36666870117188,right:270.66668701171875,bottom:98.36666870117188,left:270.66668701171875}},deleted:!0,recoverable:!1},{id:"23ccca75-3b12-4c01-9981-d503b9dc602b",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"",date:1677105276248,replies:[],context:{field:"section-0",from:310,to:319,rect:{x:488.4666748046875,y:151.36666870117188,width:0,height:17,top:151.36666870117188,right:488.4666748046875,bottom:168.36666870117188,left:488.4666748046875}},deleted:!0,recoverable:!1},{id:"8de0c1e5-064d-4f63-af4f-52f4881db3a0",person:{id:"test",name:"Richard Chase LongLastNameMcManning",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdgasdgsadg</p>",date:1677105281376,replies:[{id:"0c8b28b0-d75b-4930-bb96-7372a4721360",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>Curabitur vel turpis nec odio consequat vulputate ac non enim.</p>",date:1677123929055},{id:"69cfd371-f9cf-416b-993f-61b6d0950abb",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc in tortor non arcu suscipit vestibulum at nec neque.</p>",date:1677123930381}],context:{field:"section-0",from:85,to:106,rect:{x:548.88330078125,y:81.36666870117188,width:0,height:17,top:81.36666870117188,right:548.88330078125,bottom:98.36666870117188,left:548.88330078125}}},{id:"78ac83a7-23bb-4e92-a827-d4e70f07433d",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdgasdgasdg</p>",date:1677105283812,replies:[],context:{field:"section-0",from:738,to:758,rect:{x:620.933349609375,y:337.3666687011719,width:0,height:17,top:337.3666687011719,right:620.933349609375,bottom:354.3666687011719,left:620.933349609375}}},{id:"9621f773-d9cc-4211-a37d-611a1bb669cf",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>asdgasdgsdg</p>",date:1677105286171,replies:[],context:{field:"section-1",from:321,to:342,rect:{x:554.25,y:711.36669921875,width:0,height:17,top:711.36669921875,right:554.25,bottom:728.36669921875,left:554.25}}},{id:"7334d7fb-3c7b-4454-8e02-7e5ce4f7e2a1",person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"<p>This comment is near the end of the document</p>",date:1677106226737,replies:[],context:{field:"section-95",from:235,to:366,rect:{x:8,y:60173.3671875,width:0,height:59735.8671875,top:60173.3671875,right:8,bottom:119909.234375,left:8}}}];function ExternalDocument_stories_toConsumableArray(arr){return function ExternalDocument_stories_arrayWithoutHoles(arr){if(Array.isArray(arr))return ExternalDocument_stories_arrayLikeToArray(arr)}(arr)||function ExternalDocument_stories_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function ExternalDocument_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ExternalDocument_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ExternalDocument_stories_arrayLikeToArray(o,minLen)}(arr)||function ExternalDocument_stories_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ExternalDocument_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ExternalDocument_stories={title:"Components/ExternalDocument",component:ExternalDocument,argTypes:{}};var Simple=function Simple(args){return(0,jsx_runtime.jsx)(CommentsProvider,{children:(0,jsx_runtime.jsx)(ExternalDocument,Object.assign({},args))})};Simple.displayName="Simple",Simple.args={content:'\n  <!DOCTYPE html>\n  <html>\n    <head>\n      <style>\n        * {\n          color: purple !important;\n        }\n        h1 {\n          color: green !important;\n        }\n      </style>\n    </head>\n    <body>\n      <h1>Heading level 1</h1>\n\n      <p>Before section 1</p>\n\n      <div id="section1" data-comment-block="true">\n        ðŸ‘‰  Content for section 1\n      </div>\n\n      <p>After section 1</p>\n\n      <h2>Heading 2.1</h2>\n\n      <p>Content before section 2.1 reviewables</p>\n\n      <div id="section2-1" data-comment-block="true">\n        ðŸ‘‰ <strong>Rich</strong> content for <a href="#section2">section 2</a>. Lorem ipsum\n        dolor sit amet, consectetur adipiscing elit. Donec nec sapien dolor.\n        Suspendisse sed erat vehicula tortor porta tincidunt at eget dui. Quisque nibh\n        leo, auctor id odio nec, viverra vestibulum mauris. Vestibulum eu aliquet ipsum.\n        Pellentesque interdum dignissim lorem, sit amet dictum velit.\n      </div>\n\n      <p>Content after section 2.1 reviewables</p>\n\n      <h2>Heading 2.2</h2>\n\n      <div id="section2-2" data-comment-block="true">\n        Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n        nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n        ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.\n        Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n        in tortor non arcu suscipit vestibulum at nec neque. Vivamus fringilla velit arcu,\n        in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n        Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n        neque sit amet turpis tempus egestas.\n      </div>\n\n      <h2>Heading 2.3</h2>\n\n      <div id="section2-3" data-comment-block="true">\n        <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n        nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n        ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n        <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n        in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n        <ul>\n          <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n          <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n          <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n          <li>Cras convallis ipsum at risus suscipit sodales.</li>\n          <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n        </ul>\n\n        <p>Vivamus fringilla velit arcu,\n        in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n        Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n        neque sit amet turpis tempus egestas.</p>\n      </div>\n\n      <h2>Heading 2.4</h2>\n\n      <div id="section2-4" data-comment-block="true">\n        Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n        nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n        ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.\n        Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n        in tortor non arcu suscipit vestibulum at nec neque. Vivamus fringilla velit arcu,\n        in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n        Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n        neque sit amet turpis tempus egestas.\n      </div>\n\n    </body>\n  </html>\n  '};var StressTest=function StressTest(args){var sections=ExternalDocument_stories_toConsumableArray(Array(100)).map((function(_,i){return'\n    <div id="section-'+i+'" data-comment-block="true">\n      <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n      nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n      ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n      <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n      in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n      <ul>\n        <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n        <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n        <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n        <li>Cras convallis ipsum at risus suscipit sodales.</li>\n        <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n      </ul>\n\n      <p>Vivamus fringilla velit arcu,\n      in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n      Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n      neque sit amet turpis tempus egestas.</p>\n    </div>\n  '}));return(0,jsx_runtime.jsx)(CommentsProvider,{initialThreads:threads,children:(0,jsx_runtime.jsx)(ExternalDocument,Object.assign({},args,{content:"\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <style>\n              * {\n                color: purple !important;\n              }\n              h1 {\n                color: green !important;\n              }\n            </style>\n          </head>\n          <body>\n            <h1>Heading level 1</h1>\n            "+sections.join("")+"\n          </body>\n        </html>\n        "}))})};StressTest.displayName="StressTest",Simple.parameters=Object.assign({storySource:{source:"(args) => (\n  <CommentsProvider>\n    <ExternalDocument {...args} />\n  </CommentsProvider>\n)"}},Simple.parameters),StressTest.parameters=Object.assign({storySource:{source:'(args) => {\n  const sections = [...Array(100)].map(\n    (_, i) => `\n    <div id="section-${i}" data-comment-block="true">\n      <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n      nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n      ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n      <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n      in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n      <ul>\n        <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n        <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n        <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n        <li>Cras convallis ipsum at risus suscipit sodales.</li>\n        <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n      </ul>\n\n      <p>Vivamus fringilla velit arcu,\n      in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n      Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n      neque sit amet turpis tempus egestas.</p>\n    </div>\n  `\n  );\n\n  return (\n    <CommentsProvider initialThreads={threads}>\n      <ExternalDocument\n        {...args}\n        content={`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <style>\n              * {\n                color: purple !important;\n              }\n              h1 {\n                color: green !important;\n              }\n            </style>\n          </head>\n          <body>\n            <h1>Heading level 1</h1>\n            ${sections.join(\'\')}\n          </body>\n        </html>\n        `}\n      />\n    </CommentsProvider>\n  );\n}'}},StressTest.parameters);var __namedExportsOrder=["Simple","StressTest"]},"./src/components/Form/Form.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Autolayout:()=>Form_stories_Autolayout,CustomizingLayout:()=>CustomizingLayout,Template:()=>Template,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Form_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),dist_module=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/@internationalized/date/dist/module.js")),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),yjs=__webpack_require__("./node_modules/yjs/dist/yjs.mjs"),y_webrtc=__webpack_require__("./node_modules/y-webrtc/src/y-webrtc.js"),ydoc=new yjs.QW,yjs_provider=new y_webrtc.x$("demo-room",ydoc,{signaling:["ws://localhost:4444"]}),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["register"];function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function useRippleForm(props){var _useForm=(0,index_esm.cI)(Object.assign({},props,{mode:"onBlur"})),rhfRegister=_useForm.register,rest=_objectWithoutProperties(_useForm,_excluded);return(0,react.useMemo)((function(){return Object.assign({doc:ydoc,save:(_save=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)}))),function save(){return _save.apply(this,arguments)}),register:function register(name,options){var registerProps=rhfRegister(name,options),error=void 0;rest.formState.errors&&(error=rest.formState.errors[registerProps.name]);var defaultValue=void 0;return rest.formState.defaultValues&&(defaultValue=rest.formState.defaultValues[registerProps.name]),null!=options&&options.valueAsDate&&defaultValue&&"string"==typeof defaultValue&&(defaultValue=(0,dist_module.sG)(defaultValue)),{name:registerProps.name,isDisabled:registerProps.disabled,isRequired:registerProps.required,defaultValue,ref:registerProps.ref,onChange:function onChange(value){null!=options&&options.valueAsDate&&"string"!=typeof value&&value&&(value=value.toString()),registerProps.onChange({target:{name:registerProps.name,value},type:"change"})},errorMessage:error?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:error.message}):void 0}}},rest);var _save}),[rhfRegister])}try{useRippleForm.displayName="useRippleForm",useRippleForm.__docgenInfo={description:"Extension of React Hook Form 7 to ease integration with RUI Field components.\n\nThis customizes `value` and `onChange` handling on a per-component basis to\nconform to RUI's platform",displayName:"useRippleForm",props:{mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"onBlur"'},{value:'"onChange"'},{value:'"onSubmit"'},{value:'"onTouched"'},{value:'"all"'}]}},reValidateMode:{defaultValue:null,description:"",name:"reValidateMode",required:!1,type:{name:"enum",value:[{value:'"onBlur"'},{value:'"onChange"'},{value:'"onSubmit"'}]}},defaultValues:{defaultValue:null,description:"",name:"defaultValues",required:!1,type:{name:"any"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"any"}},resetOptions:{defaultValue:null,description:"",name:"resetOptions",required:!1,type:{name:"Partial<{ keepDirtyValues: boolean; keepErrors: boolean; keepDirty: boolean; keepValues: boolean; keepDefaultValues: boolean; keepIsSubmitted: boolean; keepTouched: boolean; keepIsValid: boolean; keepSubmitCount: boolean; }>"}},resolver:{defaultValue:null,description:"",name:"resolver",required:!1,type:{name:"Resolver<TFieldValues, TContext>"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"TContext"}},shouldFocusError:{defaultValue:null,description:"",name:"shouldFocusError",required:!1,type:{name:"boolean"}},shouldUnregister:{defaultValue:null,description:"",name:"shouldUnregister",required:!1,type:{name:"boolean"}},shouldUseNativeValidation:{defaultValue:null,description:"",name:"shouldUseNativeValidation",required:!1,type:{name:"boolean"}},criteriaMode:{defaultValue:null,description:"",name:"criteriaMode",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"firstError"'}]}},delayError:{defaultValue:null,description:"",name:"delayError",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useRippleForm.tsx#useRippleForm"]={docgenInfo:useRippleForm.__docgenInfo,name:"useRippleForm",path:"src/hooks/useRippleForm.tsx#useRippleForm"})}catch(__react_docgen_typescript_loader_error){}var context=(0,react.createContext)({});function useRippleContext(){return(0,react.useContext)(context)}var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),settingsSlice=(0,redux_toolkit_esm.oM)({name:"settings",initialState:{value:0,showComments:!0,showConditions:!1,showNavigation:!0,showDebugger:!1,diffMode:"Current",layoutMode:"Paged",interactionMode:"Edit"},reducers:{toggleComments:function toggleComments(state,action){state.showComments=action.payload},toggleNavigation:function toggleNavigation(state,action){state.showNavigation=action.payload},toggleDebugger:function toggleDebugger(state,action){state.showDebugger=action.payload},toggleConditions:function toggleConditions(state,action){state.showConditions=action.payload},setDiffMode:function setDiffMode(state,action){state.diffMode=action.payload},setLayoutMode:function setLayoutMode(state,action){state.layoutMode=action.payload},setInteractionMode:function setInteractionMode(state,action){state.interactionMode=action.payload},setCurrentPage:function setCurrentPage(state,action){state.currentPage=action.payload}}}),_settingsSlice$action=settingsSlice.actions,toggleComments=_settingsSlice$action.toggleComments,toggleNavigation=_settingsSlice$action.toggleNavigation,toggleConditions=_settingsSlice$action.toggleConditions,toggleDebugger=_settingsSlice$action.toggleDebugger,setDiffMode=_settingsSlice$action.setDiffMode,setLayoutMode=_settingsSlice$action.setLayoutMode,setInteractionMode=_settingsSlice$action.setInteractionMode;_settingsSlice$action.setCurrentPage;const settings=settingsSlice.reducer;function SubmitButton(_ref){var _ref$absolute=_ref.absolute,absolute=void 0!==_ref$absolute&&_ref$absolute;return(0,jsx_runtime.jsx)(index_module.zx,{type:"submit",variant:"primary",style:absolute&&{position:"absolute",right:"var(--rui-spacing-xs)",top:"var(--rui-spacing-xs)",zIndex:1e3},children:"Save & Exit"})}SubmitButton.displayName="SubmitButton";try{SubmitButton.displayName="SubmitButton",SubmitButton.__docgenInfo={description:"",displayName:"SubmitButton",props:{absolute:{defaultValue:{value:"false"},description:"",name:"absolute",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/SubmitButton/SubmitButton.tsx#SubmitButton"]={docgenInfo:SubmitButton.__docgenInfo,name:"SubmitButton",path:"src/components/SubmitButton/SubmitButton.tsx#SubmitButton"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Awareness(props){var _useState2=_slicedToArray((0,react.useState)([]),2),users=_useState2[0],setUsers=_useState2[1];return(0,react.useEffect)((function(){var awareness=yjs_provider.awareness,onAwarenessChange=function onAwarenessChange(changes){console.log(Array.from(awareness.getStates().values()));var updatedUsers=[];awareness.getStates().forEach((function(value){updatedUsers.push(value.user)})),setUsers(updatedUsers)};return awareness.on("change",onAwarenessChange),awareness.setLocalStateField("user",{name:"Emmanuelle Charpentier",color:"#ffb61e"}),function(){yjs_provider.awareness.off("change",onAwarenessChange)}}),[]),(0,jsx_runtime.jsxs)(index_module.HE,{children:[users.map((function(user,idx){return(0,jsx_runtime.jsx)(index_module.qE,{alt:"",name:user.name},idx)})),(0,jsx_runtime.jsx)(index_module.qE,{alt:"",name:"Chase",opicUsername:"mcmanning.1"})]})}Awareness.displayName="Awareness";try{Awareness.displayName="Awareness",Awareness.__docgenInfo={description:"",displayName:"Awareness",props:{__noop:{defaultValue:null,description:"",name:"__noop",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Awareness/Awareness.tsx#Awareness"]={docgenInfo:Awareness.__docgenInfo,name:"Awareness",path:"src/components/Awareness/Awareness.tsx#Awareness"})}catch(__react_docgen_typescript_loader_error){}function Ribbon(){var ctx=useRippleContext(),_ctx$formState=(ctx.getValues,ctx.formState),showComments=(_ctx$formState.errors,_ctx$formState.dirtyFields,_ctx$formState.touchedFields,_ctx$formState.defaultValues,ctx.selector((function(state){return state.settings.showComments}))),showConditions=ctx.selector((function(state){return state.settings.showConditions})),showNavigation=ctx.selector((function(state){return state.settings.showNavigation})),showDebugger=ctx.selector((function(state){return state.settings.showDebugger})),diffMode=ctx.selector((function(state){return state.settings.diffMode})),layoutMode=ctx.selector((function(state){return state.settings.layoutMode})),interactionMode=ctx.selector((function(state){return state.settings.interactionMode})),dispatch=ctx.dispatch();return(0,jsx_runtime.jsx)(index_module.Xk,{shadow:"md",bgc:"light",p:0,mb:"xl",h:108,style:{position:"sticky",top:0,zIndex:9999,overflowY:"hidden"},children:(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[(0,jsx_runtime.jsxs)(index_module.x4,{variant:"simple",children:[(0,jsx_runtime.jsx)(index_module.ck,{title:"Home",children:(0,jsx_runtime.jsx)(index_module.ZA,{p:"sm",children:"Formatting things"})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"Design",children:(0,jsx_runtime.jsx)(index_module.ZA,{p:"sm",children:"Design things for devs"})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"Review",children:(0,jsx_runtime.jsxs)(index_module.ZA,{p:"sm",children:[(0,jsx_runtime.jsx)(index_module.CO,{variant:"default",isSelected:showComments,onChange:function onChange(value){return dispatch(toggleComments(value))},children:"Comments"}),(0,jsx_runtime.jsx)(index_module.iz,{orientation:"vertical",gap:0}),(0,jsx_runtime.jsxs)(index_module.mg,{"aria-label":"View tracked changes as",value:diffMode,onChange:function onChange(value){dispatch(setDiffMode(value))},children:[(0,jsx_runtime.jsx)(index_module.ck,{children:"Current version"},"Current"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Unified diff"},"Unified"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Side by side diff"},"SideBySide")]})]})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"View",children:(0,jsx_runtime.jsxs)(index_module.ZA,{p:"sm",children:[(0,jsx_runtime.jsx)(index_module.CO,{variant:"default",isSelected:showNavigation,onChange:function onChange(value){return dispatch(toggleNavigation(value))},children:"Navigation"}),(0,jsx_runtime.jsxs)(index_module.CO,{variant:"default",isSelected:showDebugger,onChange:function onChange(value){return dispatch(toggleDebugger(value))},children:[(0,jsx_runtime.jsx)(index_module.JO,{name:"code"})," Debugger"]}),(0,jsx_runtime.jsxs)(index_module.CO,{variant:"default",isSelected:showConditions,onChange:function onChange(value){return dispatch(toggleConditions(value))},children:[(0,jsx_runtime.jsx)(index_module.JO,{name:"code"})," Conditions"]}),(0,jsx_runtime.jsx)(index_module.iz,{orientation:"vertical",gap:0}),(0,jsx_runtime.jsxs)(index_module.mg,{"aria-label":"Layout",value:layoutMode,onChange:function onChange(value){dispatch(setLayoutMode(value))},children:[(0,jsx_runtime.jsx)(index_module.ck,{children:"Paged"},"Paged"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Single page"},"Single")]}),(0,jsx_runtime.jsx)(index_module.iz,{orientation:"vertical",gap:0}),(0,jsx_runtime.jsxs)(index_module.mg,{"aria-label":"Interaction Mode",value:interactionMode,onChange:function onChange(value){dispatch(setInteractionMode(value))},children:[(0,jsx_runtime.jsx)(index_module.ck,{children:"Editable"},"Edit"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Read Only"},"Read"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Review"},"Review")]})]})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"Help",children:(0,jsx_runtime.jsx)(index_module.ZA,{p:"sm",children:"Docs link, contact support link, about this product, etc."})})]}),(0,jsx_runtime.jsxs)(index_module.ZA,{p:"sm",children:[(0,jsx_runtime.jsx)(Awareness,{}),(0,jsx_runtime.jsx)(SubmitButton,{})]})]})})}Ribbon.displayName="Ribbon";var commentsSlice=(0,redux_toolkit_esm.oM)({name:"comments",initialState:{threads:[]},reducers:{setFocusedThread:function setFocusedThread(state,action){state.focused=action.payload},setThreads:function setThreads(state,action){state.threads=action.payload}}}),_commentsSlice$action=commentsSlice.actions;_commentsSlice$action.setFocusedThread,_commentsSlice$action.setThreads;const comments=commentsSlice.reducer;var store=(0,redux_toolkit_esm.xC)({reducer:{settings,comments}}),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),filtrex=(__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/filtrex/dist/esm/filtrex.mjs"));function useCondition(condition){var _useRippleContext=useRippleContext(),form=_useRippleContext.form,watch=_useRippleContext.watch,getValues=_useRippleContext.getValues;if(!condition)return{passed:!0,fields:[],references:{},invalidFields:[]};var filter,fields=function getReferencedFields(condition){var result=function getUsedVariables(expression,data){var usedVars=[],options={customProp:function customProp(propertyName,get,obj,type){return usedVars.push(propertyName),!1}};return(0,filtrex.UV)(expression,options)(data),usedVars}(condition.replaceAll(" and "," or ").replaceAll(" not "," "),{});return result}(condition),references=fields.reduce((function(agg,name){return agg[name]=function findField(form,name){for(var page in form.pages)if(Object.hasOwn(form.pages[page].fields,name))return[form.pages[page].fields[name],form.pages[page]];return[void 0,void 0]}(form,name),agg}),{}),invalidFields=Object.keys(references).filter((function(k){return!references[k][0]})),options=(watch(fields),{extraFunctions:{},constants:{pi:Math.PI},customProp:function customProp(propertyName,get,obj,type){var value=(0,filtrex.qu)(propertyName,get,obj,type);return"0"!==value&&("1"===value||value)}}),responses=getValues(),passed=!1,error=void 0;try{filter=(0,filtrex.UV)(condition,options)}catch(e){error=e?"Compilation error: "+e.toString():"Compilation error: Unhandled error",passed=!1,filter=void 0}if(filter){var _result$toString,result=filter(responses);if(!0===result||!1===result)passed=result;else passed=!1,error="Execution error: "+(null!==(_result$toString=null==result?void 0:result.toString())&&void 0!==_result$toString?_result$toString:"Unknown error")}return{passed,error,fields,references,invalidFields}}var react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),regexify_string=(__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/regexify-string/index.js"));function ConditionInformation_slicedToArray(arr,i){return function ConditionInformation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ConditionInformation_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ConditionInformation_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ConditionInformation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ConditionInformation_arrayLikeToArray(o,minLen)}(arr,i)||function ConditionInformation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConditionInformation_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function FieldInfo(_ref){var _page$title,name=_ref.name,field=_ref.field,page=_ref.page;return field?(0,jsx_runtime.jsxs)(index_module.xv,{fw:"bold",c:"warning-contrast",children:[name,(0,jsx_runtime.jsx)(index_module.UW,{contentSlot:(0,jsx_runtime.jsxs)(index_module.Kq,{p:"sm",children:[(0,jsx_runtime.jsx)(index_module.xv,{children:null==field?void 0:field.label}),(0,jsx_runtime.jsxs)(index_module.ZA,{children:[(0,jsx_runtime.jsx)(index_module.Af,{c:"error",children:"required"}),(0,jsx_runtime.jsxs)(index_module.Af,{children:["Page: ",null!==(_page$title=null==page?void 0:page.title)&&void 0!==_page$title?_page$title:"Unknown"]})]})]}),children:(0,jsx_runtime.jsx)(index_module.hU,{c:"warning-contrast",label:"More information",name:"questionCircle",size:16})})]}):(0,jsx_runtime.jsxs)(index_module.xv,{c:"error",fw:"bold",children:[name,(0,jsx_runtime.jsx)(index_module.UW,{contentSlot:(0,jsx_runtime.jsx)(index_module.xv,{p:"sm",children:"Field is missing from the form definition"}),children:(0,jsx_runtime.jsx)(index_module.hU,{label:"More information",name:"exclamationCircle",c:"error",size:16})})]})}function ConditionInformation(_ref2){_ref2.name;var _ref2$condition=_ref2.condition,condition=void 0===_ref2$condition?"":_ref2$condition,references=_ref2.references,passed=_ref2.passed,children=_ref2.children,fieldNames=Object.keys(references),pattern=new RegExp("(?<field>("+fieldNames.join("|").replaceAll(".","\\.")+"))","g"),formatted=(0,regexify_string.Z)({pattern,decorator:function decorator(match,index,result){var _references$match=ConditionInformation_slicedToArray(references[match],2),field=_references$match[0],page=_references$match[1];return(0,jsx_runtime.jsx)(FieldInfo,{name:match,field,page})},input:condition});return(0,jsx_runtime.jsxs)("div",{style:{border:"2px dashed var(--rui-warning)"},children:[(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[(0,jsx_runtime.jsxs)(index_module.xv,{as:"div",bgc:"warning-shade",c:"warning-contrast",p:"xs",children:[(0,jsx_runtime.jsxs)(index_module.xv,{fw:"bold",c:"warning-contrast",children:["Condition:"," "]})," ",formatted]}),(0,jsx_runtime.jsx)(index_module.Af,{m:"sm",c:passed?"success":"error",children:passed?"Visible":"Hidden"})]}),children]})}FieldInfo.displayName="FieldInfo",ConditionInformation.displayName="ConditionInformation";try{ConditionInformation.displayName="ConditionInformation",ConditionInformation.__docgenInfo={description:"",displayName:"ConditionInformation",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},condition:{defaultValue:{value:""},description:"",name:"condition",required:!1,type:{name:"any"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"FieldReferenceSet"}},passed:{defaultValue:null,description:"",name:"passed",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Conditional/ConditionInformation.tsx#ConditionInformation"]={docgenInfo:ConditionInformation.__docgenInfo,name:"ConditionInformation",path:"src/components/Conditional/ConditionInformation.tsx#ConditionInformation"})}catch(__react_docgen_typescript_loader_error){}function Conditional(_ref){var name=_ref.name,condition=_ref.condition,children=_ref.children,showConditions=(0,useRippleContext().selector)((function(state){return state.settings.showConditions})),_useCondition=useCondition(condition),passed=_useCondition.passed,error=_useCondition.error,references=(_useCondition.fields,_useCondition.references);return showConditions&&condition?(0,jsx_runtime.jsxs)(ConditionInformation,{name,references,condition,passed,children:[error&&(0,jsx_runtime.jsx)(index_module.Xk,{p:"xs",bgc:"error",c:"error-contrast",children:error}),children]}):passed?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):null}try{Conditional.displayName="Conditional",Conditional.__docgenInfo={description:"Conditionally render children based on evaluating Ripple conditionals",displayName:"Conditional",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},condition:{defaultValue:null,description:"Condition that must be evaluated to true before children can be rendered",name:"condition",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Conditional/Conditional.tsx#Conditional"]={docgenInfo:Conditional.__docgenInfo,name:"Conditional",path:"src/components/Conditional/Conditional.tsx#Conditional"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.string.search.js");var _templateObject,index_modern=__webpack_require__("./node_modules/markdown-to-jsx/dist/index.modern.js");function md(templateStrings){for(var md=templateStrings.raw[0],i=0;i<(arguments.length<=1?0:arguments.length-1);i++)md+=String(i+1<1||arguments.length<=i+1?void 0:arguments[i+1])+templateStrings.raw[i+1];if(md.startsWith("\n")){var lines=md.split("\n").slice(1);if(lines.length>0){var afterIndent=lines[0].search(/[^\s]/);if(afterIndent>=0){var indent=lines[0].slice(0,afterIndent);md=lines.map((function(l){return l.startsWith(indent)?l.slice(indent.length):l})).join("\n")}}}return md}function ListItem(_ref){var children=_ref.children;return(0,jsx_runtime.jsxs)(index_module.xv,{as:"li",children:[(0,jsx_runtime.jsx)(index_module.JO,{name:"circleFill",c:"scarlet",size:10})," ",children]})}function _Markdown(_ref2){var strings,raw,text=_ref2.text;return text?(0,jsx_runtime.jsx)(index_modern.Z,{options:{overrides:{h1:{component:index_module.X6,props:{level:1}},h2:{component:index_module.X6,props:{level:2}},h3:{component:index_module.X6,props:{level:3}},a:{component:index_module.rU},p:{component:index_module.xv,props:{as:"p",py:"xs"}},blockquote:{component:index_module.xv,props:{as:"p",pl:"md"}},small:{component:index_module.xv,props:{as:"p",fs:"sm",c:"dark"}},ul:{component:index_module.xu,props:{as:"ul"}},li:{component:ListItem}}},children:md(_templateObject||(strings=["",""],raw||(raw=strings.slice(0)),strings.raw=raw,_templateObject=strings),text)}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}ListItem.displayName="ListItem",_Markdown.displayName="_Markdown";var Markdown=react.memo(_Markdown);try{md.displayName="md",md.__docgenInfo={description:"Tag for trimming markdown literals",displayName:"md",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#md"]={docgenInfo:md.__docgenInfo,name:"md",path:"src/components/Markdown/Markdown.tsx#md"})}catch(__react_docgen_typescript_loader_error){}try{_Markdown.displayName="_Markdown",_Markdown.__docgenInfo={description:"",displayName:"_Markdown",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#_Markdown"]={docgenInfo:_Markdown.__docgenInfo,name:"_Markdown",path:"src/components/Markdown/Markdown.tsx#_Markdown"})}catch(__react_docgen_typescript_loader_error){}try{Markdown.displayName="Markdown",Markdown.__docgenInfo={description:"",displayName:"Markdown",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#Markdown"]={docgenInfo:Markdown.__docgenInfo,name:"Markdown",path:"src/components/Markdown/Markdown.tsx#Markdown"})}catch(__react_docgen_typescript_loader_error){}var ValueFieldRenderer_excluded=["as"];function ValueFieldRenderer_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ValueFieldRenderer_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ValueFieldRenderer(_ref){var Component=_ref.as,props=ValueFieldRenderer_objectWithoutProperties(_ref,ValueFieldRenderer_excluded),_useRippleContext=useRippleContext(),selector=_useRippleContext.selector;_useRippleContext.formState.errors,selector((function(state){return state.settings.diffMode}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Component,Object.assign({},props))})}try{ValueFieldRenderer.displayName="ValueFieldRenderer",ValueFieldRenderer.__docgenInfo={description:"",displayName:"ValueFieldRenderer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/ValueFieldRenderer.tsx#ValueFieldRenderer"]={docgenInfo:ValueFieldRenderer.__docgenInfo,name:"ValueFieldRenderer",path:"src/components/Field/ValueFieldRenderer.tsx#ValueFieldRenderer"})}catch(__react_docgen_typescript_loader_error){}var data_dist_module=__webpack_require__("./node_modules/@react-stately/data/dist/module.js"),ChoiceFieldRenderer_excluded=["as","choices"];function ChoiceFieldRenderer_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ChoiceFieldRenderer_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ChoiceFieldRenderer(_ref){var Component=_ref.as,choices=_ref.choices,props=ChoiceFieldRenderer_objectWithoutProperties(_ref,ChoiceFieldRenderer_excluded),list=(0,data_dist_module.SH)({initialItems:Object.keys(choices).map((function(c){return{name:c,label:(0,jsx_runtime.jsx)(Markdown,{text:choices[c]})}})),getKey:function getKey(item){return item.name}});return(0,jsx_runtime.jsx)(Component,Object.assign({},props,{items:list.items,selectedKeys:list.selectedKeys,onSelectionChange:list.setSelectedKeys,children:function children(item){return(0,jsx_runtime.jsx)(index_module.ck,{children:item.label},item.name)}}))}ChoiceFieldRenderer.displayName="ChoiceFieldRenderer";try{ChoiceFieldRenderer.displayName="ChoiceFieldRenderer",ChoiceFieldRenderer.__docgenInfo={description:"",displayName:"ChoiceFieldRenderer",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldName"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"ReactNode"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"valid"'},{value:'"invalid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"any"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},as:{defaultValue:null,description:"",name:"as",required:!0,type:{name:"ComponentType<ChoiceFieldProps<any>>"}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"ChoicesList"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/ChoiceFieldRenderer.tsx#ChoiceFieldRenderer"]={docgenInfo:ChoiceFieldRenderer.__docgenInfo,name:"ChoiceFieldRenderer",path:"src/components/Field/ChoiceFieldRenderer.tsx#ChoiceFieldRenderer"})}catch(__react_docgen_typescript_loader_error){}function useResizeObserver_slicedToArray(arr,i){return function useResizeObserver_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useResizeObserver_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useResizeObserver_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useResizeObserver_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useResizeObserver_arrayLikeToArray(o,minLen)}(arr,i)||function useResizeObserver_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useResizeObserver_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useResizeObserver(){var frameID=(0,react.useRef)(0),ref=(0,react.useRef)(null),_useState2=useResizeObserver_slicedToArray((0,react.useState)(defaultState),2),rect=_useState2[0],setRect=_useState2[1],observer=(0,react.useMemo)((function(){return"undefined"!=typeof window?new ResizeObserver((function(entries){var entry=entries[0];entry&&(cancelAnimationFrame(frameID.current),frameID.current=requestAnimationFrame((function(){ref.current&&setRect(entry.contentRect)})))})):null}),[]);return(0,react.useEffect)((function(){return ref.current&&(null==observer||observer.observe(ref.current)),function(){null==observer||observer.disconnect(),frameID.current&&cancelAnimationFrame(frameID.current)}}),[ref.current]),[ref,rect]}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function Anchor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Anchor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Anchor_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function Anchor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var observer=new IntersectionObserver((function(entries){var _step,_iterator=_createForOfIteratorHelper(entries);try{for(_iterator.s();!(_step=_iterator.n()).done;){var entry=_step.value,bounds=entry.boundingClientRect;console.log(entry.target.id,bounds)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}));function Anchor(_ref){var name=_ref.name,children=_ref.children,ref=(0,react.useRef)(null);return(0,react.useLayoutEffect)((function(){return ref.current&&observer.observe(ref.current),function(){ref.current&&observer.unobserve(ref.current)}}),[]),(0,jsx_runtime.jsx)("div",{id:name,ref,children})}Anchor.displayName="Anchor";try{Anchor.displayName="Anchor",Anchor.__docgenInfo={description:"Position management for wiring comments to content",displayName:"Anchor",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Anchor/Anchor.tsx#Anchor"]={docgenInfo:Anchor.__docgenInfo,name:"Anchor",path:"src/components/Anchor/Anchor.tsx#Anchor"})}catch(__react_docgen_typescript_loader_error){}function Field_slicedToArray(arr,i){return function Field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Field_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Field_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Field_arrayLikeToArray(o,minLen)}(arr,i)||function Field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Field_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Field(_ref){var name=_ref.name,instance=_ref.instance,_useContext=(useRippleContext(),(0,react.useContext)(Page_context)),definition=(_useContext.name,_useContext.page.fields[name]),_useRippleField=function useRippleField(name,def,instance){var _useRippleContext=useRippleContext(),doc=_useRippleContext.doc,options=_useRippleContext.options,register=_useRippleContext.register,selector=_useRippleContext.selector,watch=_useRippleContext.watch,setValue=_useRippleContext.setValue,interactionMode=selector((function(state){return state.settings.interactionMode})),component=void 0,props={},key=instance?instance+"."+name:name;if("Collection"===def.type)component=Collection;else if(def.component){var _def$component$props;if(options.components[def.component.name])component=options.components[def.component.name],props=null!==(_def$component$props=def.component.props)&&void 0!==_def$component$props?_def$component$props:{};else component=InvalidField,props={error:"Custom component '"+def.component.name+"' missing from Ripple options"}}else(component=defaultComponent[def.type])||(component=InvalidField,props={error:"No built-in component for field type '"+def.type+"'"});var _useState2=useRippleField_slicedToArray((0,react.useState)(doc.getText(key)),2),ynode=_useState2[0];_useState2[1];(0,react.useEffect)((function(){console.log("hook observer");var observer=function observer(e){setValue(key,e.target.toString(),{shouldValidate:!0,shouldDirty:!0})};return ynode.observe(observer),function(){return ynode.unobserve(observer)}}),[ynode]);var value=watch(key),_useDebouncedState2=useRippleField_slicedToArray(function useDebouncedState(defaultValue,wait){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!1},_useState=(0,react.useState)(defaultValue),_useState2=function useDebouncedState_slicedToArray(arr,i){return function useDebouncedState_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useDebouncedState_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useDebouncedState_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useDebouncedState_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useDebouncedState_arrayLikeToArray(o,minLen)}(arr,i)||function useDebouncedState_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(_useState,2),value=_useState2[0],setValue=_useState2[1],timeoutRef=(0,react.useRef)(null),leadingRef=(0,react.useRef)(!0),clearTimeout=function clearTimeout(){return window.clearTimeout(timeoutRef.current)};(0,react.useEffect)((function(){return clearTimeout}),[]);var debouncedSetValue=function debouncedSetValue(newValue){clearTimeout(),leadingRef.current&&options.leading?setValue(newValue):timeoutRef.current=window.setTimeout((function(){leadingRef.current=!0,setValue(newValue)}),wait),leadingRef.current=!1};return[value,debouncedSetValue]}("",200),2),debouncedValue=_useDebouncedState2[0],setDebouncedValue=_useDebouncedState2[1];(0,react.useEffect)((function(){Array.isArray(value)||"string"==typeof value&&(ynode.length>0&&ynode.delete(0,ynode.length),ynode.insert(0,value),console.debug(ynode))}),[debouncedValue]);var handleChange=function(){var _ref=function useRippleField_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useRippleField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useRippleField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(useRippleField_regeneratorRuntime().mark((function _callee(value){return useRippleField_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:setValue(key,value),setDebouncedValue(value);case 2:case"end":return _context.stop()}}),_callee)})));return function handleChange(_x2){return _ref.apply(this,arguments)}}();return(0,react.useEffect)((function(){console.log("hook register"),register(key,{disabled:"Edit"!==interactionMode})}),[key,register,interactionMode]),{component,componentProps:(0,index_module.dG)(props,{onChange:handleChange,value:null!=value?value:void 0})}}(name,definition,instance),component=_useRippleField.component,componentProps=_useRippleField.componentProps,_useRippleContext=useRippleContext(),selector=_useRippleContext.selector,errors=_useRippleContext.formState.errors,diffMode=selector((function(state){return state.settings.diffMode})),error=(selector((function(state){return state.settings.interactionMode})),errors[name]),fieldProps={name,label:(0,jsx_runtime.jsx)(index_module.Kq,{"data-ripple-field":name,children:(0,jsx_runtime.jsx)(Markdown,{text:definition.label})}),description:(0,jsx_runtime.jsx)(Markdown,{text:definition.description}),errorMessage:null==error?void 0:error.message,necessityIndicator:!(null==definition||!definition.required),diff:"Current"!==diffMode?diffMode:void 0},_useResizeObserver2=Field_slicedToArray(useResizeObserver(),2);_useResizeObserver2[0],_useResizeObserver2[1];return definition.choices?(0,jsx_runtime.jsx)(Anchor,{name:(null!=instance?instance:"")+name,children:(0,jsx_runtime.jsx)(Conditional,{name,condition:definition.condition,children:(0,jsx_runtime.jsx)(ChoiceFieldRenderer,Object.assign({as:component},fieldProps,componentProps,{choices:definition.choices}))})}):(0,jsx_runtime.jsx)(Conditional,{name,condition:definition.condition,children:(0,jsx_runtime.jsx)(Anchor,{name:(null!=instance?instance:"")+name,children:(0,jsx_runtime.jsx)(ValueFieldRenderer,Object.assign({as:component},fieldProps,componentProps))})})}Field.displayName="Field";try{Field.displayName="Field",Field.__docgenInfo={description:"Ripple field",displayName:"Field",props:{name:{defaultValue:null,description:"Form field name to bind.\n\nThis can either be a simple field name or a\ndot-delimited path to a field stored within\na collection instance.\n\nExamples:\n- `fieldName`\n- `fieldName1.[collectionId1].fieldName2`",name:"name",required:!0,type:{name:"FieldName"}},instance:{defaultValue:null,description:"",name:"instance",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/Field.tsx#Field"]={docgenInfo:Field.__docgenInfo,name:"Field",path:"src/components/Field/Field.tsx#Field"})}catch(__react_docgen_typescript_loader_error){}var Page_context=(0,react.createContext)({});function Page(_ref){var name=_ref.name,_ref$autolayout=_ref.autolayout,autolayout=void 0!==_ref$autolayout&&_ref$autolayout,children=_ref.children,_useRippleContext=useRippleContext(),form=_useRippleContext.form,reset=_useRippleContext.reset,getPreviousPage=_useRippleContext.getPreviousPage,getNextPage=_useRippleContext.getNextPage,getValues=_useRippleContext.getValues,page=form.pages[name];(0,react.useEffect)((function(){page&&reset(Object.assign({},getValues(),Object.keys(page.fields).reduce((function(agg,name){return agg[name]=null,agg}),{})),{keepErrors:!0,keepDirty:!0})}),[]);var Provider=Page_context.Provider;if(!page)return(0,jsx_runtime.jsxs)(index_module.bZ,{variant:"error",title:"Page not found",children:["Page missing from form definition: ",name]});var prev=getPreviousPage(name),next=getNextPage(name);return(0,jsx_runtime.jsx)(Provider,{value:{name,page},children:(0,jsx_runtime.jsxs)(Conditional,{name,condition:page.condition,children:[(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:(0,jsx_runtime.jsx)(index_module.fO,{id:"ripple-page-"+name,children:page.title})}),(0,jsx_runtime.jsxs)(index_module.Af,{isRemovable:!1,children:["page.name: ",name]}),page.description&&(0,jsx_runtime.jsx)(index_module.Xk,{p:"lg",bgc:"light",shadow:"sm",withBorder:!0,children:(0,jsx_runtime.jsx)(Markdown,{text:page.description})}),(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",gap:"xl",py:"lg",children:[autolayout&&(0,jsx_runtime.jsx)(Autolayout,{page}),!autolayout&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})]}),(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[!prev&&(0,jsx_runtime.jsx)(index_module.jg,{as:react_router_dom_dist.rU,to:"/",direction:"previous",children:"Home"}),prev&&(0,jsx_runtime.jsx)(index_module.jg,{as:react_router_dom_dist.rU,to:"/page/"+prev.name,direction:"previous",children:prev.definition.title}),next&&(0,jsx_runtime.jsx)(index_module.jg,{as:react_router_dom_dist.rU,to:"/page/"+next.name,direction:"next",children:next.definition.title}),!next&&(0,jsx_runtime.jsx)(index_module.jg,{as:react_router_dom_dist.rU,to:"/submit",direction:"next",children:"Review & Submit"})]})]})})}function Autolayout(_ref2){var page=_ref2.page;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object.keys(page.fields).map((function(name){return(0,jsx_runtime.jsx)(Field,{name},name)}))})}Page.displayName="Page";try{Page.displayName="Page",Page.__docgenInfo={description:"",displayName:"Page",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"PageName"}},autolayout:{defaultValue:{value:"false"},description:"Automatically generate Page and Field components\nbased on the current form definition.",name:"autolayout",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Page/Page.tsx#Page"]={docgenInfo:Page.__docgenInfo,name:"Page",path:"src/components/Page/Page.tsx#Page"})}catch(__react_docgen_typescript_loader_error){}function InstanceSummary(_ref){var name=_ref.name,id=_ref.id,index=_ref.index,template=_ref.template,onRemove=_ref.onRemove,PageProvider=Page_context.Provider,watch=useRippleContext().watch,firstField=Object.keys(template.fields)[0],title=watch(name+"."+index+"."+firstField);return(0,jsx_runtime.jsx)(PageProvider,{value:{name,page:template},children:(0,jsx_runtime.jsxs)(index_module.PO,{mt:"-xxs",summary:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(index_module.xv,{style:{paddingRight:100},children:null!=title?title:"Untitled"}),(0,jsx_runtime.jsx)(index_module.pu,{variant:"subtle",c:"error",title:"Foo bar",dialogContentSlot:"Delete blah blah",primaryActionSlot:"Remove",onPrimaryAction:function onPrimaryAction(){return onRemove(index)},style:{position:"absolute",top:"var(--rui-spacing-sm)",right:"var(--rui-spacing-sm)"},children:"Remove"})]}),children:[(0,jsx_runtime.jsxs)(index_module.Af,{children:["ID: ",id]}),Object.keys(template.fields).map((function(fieldName){return(0,jsx_runtime.jsx)(Field,{name:fieldName,instance:name+"."+index},fieldName)}))]})})}InstanceSummary.displayName="InstanceSummary";try{InstanceSummary.displayName="InstanceSummary",InstanceSummary.__docgenInfo={description:"",displayName:"InstanceSummary",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldName"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},template:{defaultValue:null,description:"",name:"template",required:!0,type:{name:"PageDefinition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Collection/InstanceSummary.tsx#InstanceSummary"]={docgenInfo:InstanceSummary.__docgenInfo,name:"InstanceSummary",path:"src/components/Collection/InstanceSummary.tsx#InstanceSummary"})}catch(__react_docgen_typescript_loader_error){}var Collection_excluded=["name"];function Collection_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function Collection_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Collection(_ref){var _ref$name=_ref.name,name=void 0===_ref$name?"__invalid":_ref$name,props=Collection_objectWithoutProperties(_ref,Collection_excluded),control=useRippleContext().control,_useContext=(0,react.useContext)(Page_context),page=(_useContext.name,_useContext.page),_useFieldArray=(0,index_esm.Dq)({control,name}),fields=_useFieldArray.fields,append=_useFieldArray.append,remove=(_useFieldArray.prepend,_useFieldArray.remove),template=(_useFieldArray.swap,_useFieldArray.move,_useFieldArray.insert,page.fields[name].template);if(!template)return(0,jsx_runtime.jsx)(index_module.bZ,{variant:"error",title:"Missing template for '"+name+"'",children:"Form definition does not include a PageDefinition template to use for instancing this collection."});var onRemove=function onRemove(index){remove(index)};return(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",children:[(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",align:"center",children:[(0,jsx_runtime.jsx)(index_module.X6,{level:3,children:props.label}),(0,jsx_runtime.jsx)(index_module.zx,{onPress:function onAdd(){append(Object.assign({},Object.keys(template.fields).reduce((function(agg,name){return agg[name]=null,agg}),{})))},children:"Add"})]}),props.description,(0,jsx_runtime.jsx)(index_module.Kq,{gap:0,align:"stretch",children:fields.map((function(field,index){return(0,jsx_runtime.jsx)(InstanceSummary,{name,template,id:field.id,index,onRemove},field.id)}))}),fields.length<1&&(0,jsx_runtime.jsx)(index_module.xv,{children:"There's nothing here! Click the Add button to start adding entries"})]})}Collection.displayName="Collection";try{Collection.displayName="Collection",Collection.__docgenInfo={description:"",displayName:"Collection",props:{name:{defaultValue:{value:"__invalid"},description:"",name:"name",required:!1,type:{name:"FieldName"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"ReactNode"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"valid"'},{value:'"invalid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"any"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},children:{defaultValue:null,description:"The contents of the collection.",name:"children",required:!0,type:{name:"any"}},previousValue:{defaultValue:null,description:"",name:"previousValue",required:!1,type:{name:"any"}},previousItems:{defaultValue:null,description:"Previous items objects in the collection.",name:"previousItems",required:!1,type:{name:"Iterable<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Collection/Collection.tsx#Collection"]={docgenInfo:Collection.__docgenInfo,name:"Collection",path:"src/components/Collection/Collection.tsx#Collection"})}catch(__react_docgen_typescript_loader_error){}var extension_placeholder_dist=__webpack_require__("./node_modules/@tiptap/extension-placeholder/dist/index.js"),extension_character_count_dist=__webpack_require__("./node_modules/@tiptap/extension-character-count/dist/index.js"),react_dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),starter_kit_dist=__webpack_require__("./node_modules/@tiptap/starter-kit/dist/index.js"),core_dist=__webpack_require__("./node_modules/@tiptap/core/dist/index.js"),keys=__webpack_require__("./node_modules/y-prosemirror/src/plugins/keys.js"),undo_plugin=__webpack_require__("./node_modules/y-prosemirror/src/plugins/undo-plugin.js"),sync_plugin=__webpack_require__("./node_modules/y-prosemirror/src/plugins/sync-plugin.js"),cursor_plugin=__webpack_require__("./node_modules/y-prosemirror/src/plugins/cursor-plugin.js");function collab_slicedToArray(arr,i){return function collab_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function collab_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function collab_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return collab_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return collab_arrayLikeToArray(o,minLen)}(arr,i)||function collab_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function collab_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var awarenessStatesToArray=function awarenessStatesToArray(states){return Array.from(states.entries()).map((function(_ref){var _ref2=collab_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return Object.assign({clientId:key},value.user)}))},Collaboration=core_dist.hj.create({name:"collaboration",priority:1e3,addOptions:function addOptions(){return{document:null,provider:null,field:"default",fragment:null,user:{name:null,color:null},render:function render(user){var cursor=document.createElement("span");cursor.classList.add("collaboration-cursor__caret"),cursor.setAttribute("style","border-color: "+user.color);var label=document.createElement("div");return label.classList.add("collaboration-cursor__label"),label.setAttribute("style","background-color: "+user.color),label.insertBefore(document.createTextNode(user.name),null),cursor.insertBefore(label,null),cursor},onUpdate:function onUpdate(){return null}}},onCreate:function onCreate(){},addStorage:function addStorage(){return{users:[]}},addCommands:function addCommands(){var _this=this;return{undo:function undo(){return function(_ref3){var tr=_ref3.tr,state=_ref3.state,dispatch=_ref3.dispatch;return tr.setMeta("preventDispatch",!0),0!==keys.Gk.getState(state).undoManager.undoStack.length&&(!dispatch||(0,undo_plugin.Yw)(state))}},redo:function redo(){return function(_ref4){var tr=_ref4.tr,state=_ref4.state,dispatch=_ref4.dispatch;return tr.setMeta("preventDispatch",!0),0!==keys.Gk.getState(state).undoManager.redoStack.length&&(!dispatch||(0,undo_plugin.KX)(state))}},updateUser:function updateUser(attributes){return function(){return _this.options.user=attributes,_this.options.provider.awareness.setLocalStateField("user",_this.options.user),!0}}}},addKeyboardShortcuts:function addKeyboardShortcuts(){var _this2=this;return{"Mod-z":function ModZ(){return _this2.editor.commands.undo()},"Mod-y":function ModY(){return _this2.editor.commands.redo()},"Shift-Mod-z":function ShiftModZ(){return _this2.editor.commands.redo()}}},addProseMirrorPlugins:function addProseMirrorPlugins(){var awareness,_this3=this,fragment=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[(0,sync_plugin.Z)(fragment),(0,undo_plugin.v0)(),(0,cursor_plugin.JL)((awareness=_this3.options.provider.awareness,awareness.setLocalStateField("user",_this3.options.user),_this3.storage.users=awarenessStatesToArray(awareness.states),awareness.on("update",(function(){_this3.storage.users=awarenessStatesToArray(awareness.states)})),awareness),{cursorBuilder:this.options.render})]}}),injectStylesIntoStyleTag=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),collab_cursor=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/TextEditor/collab-cursor.css"),options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(collab_cursor.Z,options);collab_cursor.Z.locals;var comment=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/TextEditor/comment.css"),comment_options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(comment.Z,comment_options);comment.Z.locals;var components_TextEditor_comment=__webpack_require__("./src/components/TextEditor/comment.ts"),useCommentingContext=__webpack_require__("./src/hooks/useCommentingContext.ts");function CommentView(){return(0,jsx_runtime.jsxs)(react_dist.T5,{className:"comment-view",children:[(0,jsx_runtime.jsx)("span",{className:"label",children:"React Component"}),(0,jsx_runtime.jsx)("div",{className:"content",children:"hi"})]})}CommentView.displayName="CommentView";const comment_view=core_dist.NB.create({name:"commentView",atom:!0,renderHTML:function renderHTML(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["react-component",(0,core_dist.P1)(HTMLAttributes)]},addNodeView:function addNodeView(){return(0,react_dist.fW)(CommentView)}});var TextEditor_excluded=["limit"];function TextEditor_slicedToArray(arr,i){return function TextEditor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function TextEditor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function TextEditor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return TextEditor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TextEditor_arrayLikeToArray(o,minLen)}(arr,i)||function TextEditor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TextEditor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function TextEditor_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function TextEditor_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function TextEditor(_ref){var _editor$storage$chara,_editor$storage$chara2,_ref$limit=_ref.limit,limit=void 0===_ref$limit?1e3:_ref$limit,props=TextEditor_objectWithoutProperties(_ref,TextEditor_excluded),_useState2=TextEditor_slicedToArray((0,react.useState)(),2),provider=_useState2[0],setProvider=_useState2[1],_useCommentingContext=(0,useCommentingContext.g)(),focusThread=_useCommentingContext.focusThread,clearFocus=_useCommentingContext.clearFocus,startThread=_useCommentingContext.startThread,name=props.name,onChange=props.onChange;props.onBlur,props.value;(0,react.useEffect)((function(){setProvider(yjs_provider)}),[]);var extensions=provider?[starter_kit_dist.Z.configure({history:!1}),Collaboration.configure({document:ydoc,provider,field:name+"-tiptap",user:{color:"#3daee9",name:"John Doe"}}),extension_character_count_dist.Z.configure({limit}),components_TextEditor_comment.s.configure({}),comment_view]:[extension_placeholder_dist.Z.configure({placeholder:"Loading..."}),starter_kit_dist.Z],editor=(0,react_dist.jE)({extensions,onUpdate:function onUpdate(_ref2){var editor=_ref2.editor;onChange&&onChange(editor.getHTML())},onSelectionUpdate:function onSelectionUpdate(_ref3){var editor=_ref3.editor;console.log("update selection"),checkForClickedComment(editor),checkForUpdatedSelection(editor)},onBlur:function onBlur(_ref4){var editor=_ref4.editor;setIsTextSelected(!1),onChange&&onChange(editor.getHTML())},editorProps:{attributes:{spellcheck:"false"}}},[provider]),_React$useState2=TextEditor_slicedToArray(react.useState(!1),2),isTextSelected=_React$useState2[0],setIsTextSelected=_React$useState2[1],checkForUpdatedSelection=function checkForUpdatedSelection(editor){setIsTextSelected(!editor.state.selection.empty)},checkForClickedComment=function checkForClickedComment(editor){editor.isActive("comment")?function focusActiveComment(editor){console.log("activate comment",editor.getAttributes("comment"));var id=editor.getAttributes("comment").comment;focusThread(id)}(editor):(clearFocus(),setIsTextSelected(!editor.state.selection.empty))};return(0,jsx_runtime.jsxs)(index_module.xu,{className:"rui-border-2",p:"sm",children:[(0,jsx_runtime.jsx)(react_dist.kg,{editor}),null!==(_editor$storage$chara=null==editor||null===(_editor$storage$chara2=editor.storage.characterCount)||void 0===_editor$storage$chara2?void 0:_editor$storage$chara2.characters())&&void 0!==_editor$storage$chara?_editor$storage$chara:0,"/",limit," characters",isTextSelected&&(0,jsx_runtime.jsx)(index_module.zx,{onPress:function addCommentOnSelection(){if(null!=editor&&editor.state.selection){var _editor$state$selecti=editor.state.selection,from=_editor$state$selecti.from,to=_editor$state$selecti.to,empty=_editor$state$selecti.empty;_editor$state$selecti.$anchor;if(!empty){var context=editor.state.doc.textBetween(from,to," ");console.log(context);var encoded=startThread({field:name,from,to}).id;editor.chain().setComment(encoded).blur().run()}}setIsTextSelected(!1)},children:"Comment"})]})}TextEditor.displayName="TextEditor";try{TextEditor.displayName="TextEditor",TextEditor.__docgenInfo={description:"",displayName:"TextEditor",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldName"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"ReactNode"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"valid"'},{value:'"invalid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"any"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},limit:{defaultValue:{value:"1000"},description:"",name:"limit",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TextEditor/TextEditor.tsx#TextEditor"]={docgenInfo:TextEditor.__docgenInfo,name:"TextEditor",path:"src/components/TextEditor/TextEditor.tsx#TextEditor"})}catch(__react_docgen_typescript_loader_error){}var defaultComponent={Text:TextEditor,Boolean:index_module._3,Person:index_module.nv,Key:index_module.Ac,KeyArray:index_module.nb,Flag:index_module.ji,FlagArray:index_module.nb,Date:index_module.Nn,File:void 0,Number:index_module.Ki,NumberRange:void 0};__webpack_require__("./node_modules/core-js/modules/web.timers.js");function useDebouncedState_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRippleField_regeneratorRuntime(){useRippleField_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function useRippleField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useRippleField_slicedToArray(arr,i){return function useRippleField_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useRippleField_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useRippleField_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useRippleField_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useRippleField_arrayLikeToArray(o,minLen)}(arr,i)||function useRippleField_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useRippleField_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function InvalidField(props){return(0,jsx_runtime.jsx)(index_module.bZ,{variant:"error",title:"Missing field component for '"+props.name+"'",children:props.error})}InvalidField.displayName="InvalidField";var Comments=__webpack_require__("./src/components/Comments/index.ts");function Aside(){return(0,useRippleContext().selector)((function(state){return state.settings.showComments}))?(0,jsx_runtime.jsx)(Comments.H,{}):null}function Debugger(){var _useRippleContext=useRippleContext(),_useRippleContext$for=_useRippleContext.formState,touchedFields=_useRippleContext$for.touchedFields,dirtyFields=_useRippleContext$for.dirtyFields,errors=_useRippleContext$for.errors,defaultValues=_useRippleContext$for.defaultValues,getValues=_useRippleContext.getValues,threads=(0,useCommentingContext.g)().threads;return(0,jsx_runtime.jsxs)(index_module.Kq,{miw:400,w:400,style:{overflowX:"auto"},children:[(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:"RHF"}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.touchedFields"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(touchedFields,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.dirtyFields"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(dirtyFields,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.errors"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(errors,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"formState.defaultValues"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(defaultValues,void 0,2)}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",children:"getValues"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(getValues(),void 0,2)}),(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:"Threads"}),(0,jsx_runtime.jsx)(index_module.EK,{block:!0,children:JSON.stringify(threads,void 0,2)})]})}function PageNavLink(_ref){var name=_ref.name,_children=_ref.children,definition=useRippleContext().form.pages[name];return definition?(0,jsx_runtime.jsx)(Conditional,{name,condition:definition.condition,children:(0,jsx_runtime.jsx)(index_module.tE,{children:(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:"page/"+name,children:function children(_ref2){var isActive=_ref2.isActive;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[definition.title,_children,isActive?" ðŸ˜Ž":""]})}})})}):(0,jsx_runtime.jsxs)(index_module.xu,{bgc:"error",c:"error-contrast",p:"xs",children:["Missing page '",name,"'"]})}function CustomNavLink(_ref3){var to=_ref3.to,_children2=_ref3.children;return(0,jsx_runtime.jsx)(index_module.tE,{children:(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to,children:function children(_ref4){var isActive=_ref4.isActive;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[_children2," ",isActive?" ðŸ˜Ž":""]})}})})}function Navigation(){var _useRippleContext2=useRippleContext(),selector=_useRippleContext2.selector,form=_useRippleContext2.form,showNavigation=selector((function(state){return state.settings.showNavigation})),showDebugger=selector((function(state){return state.settings.showDebugger})),layoutMode=selector((function(state){return state.settings.layoutMode}));if(showDebugger)return(0,jsx_runtime.jsx)(Debugger,{});if(!showNavigation)return null;if("Paged"===layoutMode)return(0,jsx_runtime.jsxs)(index_module.Kq,{miw:300,children:[(0,jsx_runtime.jsx)(CustomNavLink,{to:"/",children:"Home"}),(0,jsx_runtime.jsx)(index_module.iz,{orientation:"horizontal"}),Object.keys(form.pages).map((function(name){return(0,jsx_runtime.jsx)(PageNavLink,{name},name)})),(0,jsx_runtime.jsx)(index_module.iz,{orientation:"horizontal"}),(0,jsx_runtime.jsx)(CustomNavLink,{to:"/submit",children:"Submit"})]});if("Single"===layoutMode)return(0,jsx_runtime.jsxs)(index_module.Kq,{miw:300,children:["TODO: Single page navigation links.",Object.keys(form.pages).map((function(name){return(0,jsx_runtime.jsx)(index_module.rU,{href:"#ripple-page-"+name,children:form.pages[name].title},name)}))]});throw new Error("Unhandled layout mode: "+layoutMode)}function Content(){var _useRippleContext=useRippleContext(),form=_useRippleContext.form,_useRippleContext$for=(_useRippleContext.handleSubmit,_useRippleContext.getValues,_useRippleContext.getPreviousPage,_useRippleContext.getNextPage,_useRippleContext.formState),errors=_useRippleContext$for.errors;_useRippleContext$for.dirtyFields,_useRippleContext$for.touchedFields,_useRippleContext$for.defaultValues;return(0,jsx_runtime.jsxs)(index_module.ZA,{grow:!0,children:[(0,jsx_runtime.jsx)(Navigation,{}),(0,jsx_runtime.jsxs)(index_module.xu,{w:"100%",children:[(0,jsx_runtime.jsx)(index_module.X6,{level:1,children:form.title}),(0,jsx_runtime.jsxs)(index_module.xv,{fs:"sm",c:"dark",children:["Version ",form.version]}),(0,jsx_runtime.jsx)(index_module.iz,{}),(0,jsx_runtime.jsx)(index_module._o,{errorMessages:errors}),(0,jsx_runtime.jsx)(dist.j3,{})]}),(0,jsx_runtime.jsx)(Aside,{})]})}function ErrorBoundary(){var error=(0,dist.lk)();return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h1",{children:"Oops!"}),(0,jsx_runtime.jsx)("p",{children:"Sorry, an unexpected error has occurred."}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("i",{children:error.statusText||error.message})})]})}function PageRouter(_ref){var children=_ref.children,_useRippleContext=useRippleContext(),form=_useRippleContext.form,layoutMode=(0,_useRippleContext.selector)((function(state){return state.settings.layoutMode})),pages={};return react.Children.forEach(children,(function(child){react.isValidElement(child)&&"page"===child.type&&(pages[child.props.name]=child)})),Object.keys(form.pages).forEach((function(name){name in pages||(pages[name]=(0,jsx_runtime.jsx)(Page,{name,autolayout:!0},name))})),(0,jsx_runtime.jsxs)(dist.VA,{children:["Paged"===layoutMode&&(0,jsx_runtime.jsx)(dist.Z5,{children:(0,jsx_runtime.jsx)(dist.AW,{path:"/",element:(0,jsx_runtime.jsx)(Content,{}),errorElement:(0,jsx_runtime.jsx)(ErrorBoundary,{}),children:Object.keys(pages).map((function(name){return(0,jsx_runtime.jsx)(dist.AW,{path:"page/"+name,element:pages[name]},name)}))})}),"Single"===layoutMode&&(0,jsx_runtime.jsx)(dist.Z5,{children:(0,jsx_runtime.jsx)(dist.AW,{path:"/",element:(0,jsx_runtime.jsx)(Content,{}),errorElement:(0,jsx_runtime.jsx)(ErrorBoundary,{}),children:(0,jsx_runtime.jsx)(dist.AW,{path:"page/:name",element:(0,jsx_runtime.jsx)(react.Fragment,{children:Object.keys(pages).map((function(name){return(0,jsx_runtime.jsx)(react.Fragment,{children:pages[name]},name)}))})})})})]})}Aside.displayName="Aside",Debugger.displayName="Debugger",PageNavLink.displayName="PageNavLink",CustomNavLink.displayName="CustomNavLink",Content.displayName="Content",ErrorBoundary.displayName="ErrorBoundary",PageRouter.displayName="PageRouter";try{PageRouter.displayName="PageRouter",PageRouter.__docgenInfo={description:"",displayName:"PageRouter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PageRouter/PageRouter.tsx#PageRouter"]={docgenInfo:PageRouter.__docgenInfo,name:"PageRouter",path:"src/components/PageRouter/PageRouter.tsx#PageRouter"})}catch(__react_docgen_typescript_loader_error){}function Form(_ref){var form=_ref.form,options=_ref.options,children=(_ref.autolayout,_ref.children),ctx=function useRipple(form){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},opt=Object.assign({components:{}},options),rform=useRippleForm({mode:"onBlur"});return Object.assign({form,options:opt,dispatch:es.I0,selector:es.v9,getNextPage:function getNextPage(page){var keys=Object.keys(form.pages),idx=keys.indexOf(page);if(idx>-1&&idx<keys.length-1)return{name:keys[idx+1],definition:form.pages[keys[idx+1]]}},getPreviousPage:function getPreviousPage(page){var keys=Object.keys(form.pages),idx=keys.indexOf(page);if(idx>-1&&idx>0)return{name:keys[idx-1],definition:form.pages[keys[idx-1]]}}},rform)}(form,options),Provider=context.Provider;return(0,jsx_runtime.jsx)(Provider,{value:ctx,children:(0,jsx_runtime.jsx)(es.zt,{store,children:(0,jsx_runtime.jsx)(FormWrapper,{children})})})}function FormWrapper(_ref2){var children=_ref2.children,_useRippleContext=useRippleContext(),handleSubmit=_useRippleContext.handleSubmit,_useRippleContext$for=_useRippleContext.formState;_useRippleContext$for.errors,_useRippleContext$for.dirtyFields,_useRippleContext$for.touchedFields,_useRippleContext$for.defaultValues;return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit((function onSubmit(data){return console.log(data)})),children:[(0,jsx_runtime.jsx)(Ribbon,{}),(0,jsx_runtime.jsx)(PageRouter,{children})]})})}Form.displayName="Form",FormWrapper.displayName="FormWrapper";try{Form.displayName="Form",Form.__docgenInfo={description:"",displayName:"Form",props:{form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"FormDefinition"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"Partial<RippleOptions>"}},autolayout:{defaultValue:null,description:"Automatically generate Page and Field components\nbased on the current form definition.",name:"autolayout",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/Form.tsx#Form"]={docgenInfo:Form.__docgenInfo,name:"Form",path:"src/components/Form/Form.tsx#Form"})}catch(__react_docgen_typescript_loader_error){}const osu_irb_initial={title:"OSU IRB Initial Submission",version:"1.0",pages:{multiSiteStudy:{title:"Multi-site Study",description:"\n    Multi-site research includes projects or studies that involve collaboration with sites or individuals\n    external to Ohio State. The IRB must determine whether external sites or personnel need IRB approval in\n    order to participate in study activities.\n\n    EXAMPLES OF MULTI-SITE RESEARCH:\n    - Ohio State is the lead institution of a group of sites participating in the same research project,\n      where all sites are recruiting subjects and administering research interventions\n    - An Ohio State investigator is participating in a research project, where another institution is the\n      lead institution.\n    - Ohio State is the IRB of record for one or more other sites participating in a research project\n\n    EXAMPLES OF NON-MULTI-SITE RESEARCH:\n    - An Ohio State investigator is conducting research at a local elementary school that involves\n      recruiting participants and performing study interventions, where no school employees are\n      engaged in the research.\n    - An Ohio State investigator and research staff interact with clients at a local pharmacy, and a\n      letter of support from the pharmacy is in place.\n  ",fields:{isTest1:{condition:'ant or not bat and cat in ("dog", "elf") or fish and g.h.i == jaguar',type:"Boolean",label:"Is this sensible?"},isMultiSite:{type:"Boolean",label:"Is this a multi-site study?"},isPILeadInvestigator:{type:"Boolean",condition:"isMultiSite",label:"\n        Is the Ohio State PI the lead investigator or is The Ohio State University the lead site for\n        collaborative research?\n      "},communicationPlan:{type:"Text",condition:"isMultiSite and isPILeadInvestigator",label:"\n        Describe the communication between sites that might be relevant to the protection of\n        participants, such as unanticipated problems, interim results, and protocol\n        modifications.\n      "},leadInstitution:{type:"Text",condition:"isMultiSite and not isPILeadInvestigator",label:"Provide the name of the lead institution directing the research."},leadInstitutionApproval:{type:"File",condition:"isMultiSite and not isPILeadInvestigator",label:"Provide the IRB or ethics board approval from the lead institution, as applicable."},coordinatingCenter:{type:"Text",label:"\n        If a separate data coordinating center exists (different from lead institution)\n        provide the name.\n      "},isOhioStateIRBOfRecord:{type:"Boolean",condition:"isMultiSite",label:"\n        Will Ohio State be IRB of record for any other institution/location?\n      "},siteCommunications:{condition:"isOhioStateIRBOfRecord and not isPILeadInvestigator",type:"Text",label:"\n        Describe the communication between sites that might be relevant to the protection of\n        participants, such as unanticipated problems, interim results, and protocol\n        modifications.\n      "}}},locations:{title:"Location of Research",description:"\n    Research to be conducted at locations other than approved performance sites may require a letter of\n    support or another institution's approval if personnel are engaged. See OHRP Engagement Guidance or\n    contact ORRP at [irbinfo@osu.edu](mailto:irbinfo@osu.edu) or [614-688-8457](tel:614-688-8457) for more information.\n  ",fields:{approved:{type:"Collection",label:"Ohio State Approved Research Sites",template:{title:"Ohio State Approved Research Site",fields:{approvedSiteKey:{type:"Key",component:{name:"ApprovedResearchSiteSearchField",props:{endpoint:"https://example.com/api"}},label:"\n              Select the appropriate Ohio State approved research site by typing the building name or address\n              in the search field below. If the specific Ohio State site is not listed,\n              [contact ORRP](mailto:irbinfo@osu.edu) for assistance.\n            ",description:"\n              If you are adding a county extension office as a research location, enter the county name first when\n              searching. If you are performing research in ALL county extension offices, select â€œOhio State University\n              Extensionâ€.\n\n              To add a Columbus campus location, begin typing an academic building name below or enter â€œOhio State\n              Columbus Campusâ€ in the search field and select that option when it appears\n            "}}}},domestic:{type:"Collection",label:"Domestic Research Sites",template:{title:"Non-Ohio State Domestic Research Site",description:"\n          Please provide the following information about the\n          non-Ohio State domestic research site.\n        ",fields:{locationDescription:{type:"Text",label:"Location name/description"},address1:{type:"Text",label:"Address line 1"},address2:{type:"Text",label:"Address line 2"},city:{type:"Text",label:"City"},state:{type:"Text",label:"State"},approvalDocuments:{type:"File",label:"\n              A letter of support and/or another IRB's approval should be provided, as necessary.\n              [Contact ORRP](mailto:irbinfo@osu.edu) for more information.\n            "}}}}}},team:{title:"Study Personnel",description:"\n    Enter all Ohio State study team members below. External collaborators will be entered on a different\n    page. Study team members should only be listed in one category (i.e., PI, co-investigator, or key\n    personnel).\n\n    Co-investigators and key personnel are defined as individuals who participate in the design, conduct, or\n    reporting of human subjects research. At a minimum, include individuals who recruit participants, obtain\n    consent, or who collect study data.\n\n    Additional contacts can also serve in another role on the project.\n\n    All individuals listed as Ohio State study team members will have access to all submitted information,\n    including completion status of team membersâ€™ administrative and training requirements (CITI, RCR, COI\n    disclosure), and may edit submissions on behalf of the principal investigator.\n    Electronic signatures are required of all Ohio State investigators named on the submission.\n\n    The individual entering the new study will automatically be entered as an additional contact (if not\n    designated as the principal investigator). This individual must click the edit icon to edit his/her role if an\n    additional role (i.e., co-investigator or key personnel) is also applicable.\n  ",fields:{team:{type:"Collection",label:"Study Team",template:{title:"New Study Team Member",fields:{person:{type:"Person",label:"Team member search",component:{name:"InvestigatorSearchField",props:{iconName:"user",endpoint:"https://example.com/api"}}},designation:{type:"Key",label:"Team member designation",choices:{"Co-Investigator":"Co-Investigator","Key Personnel":"Key Personnel","Additional Contact":"Additional Contact (receives study correspondence from ORRP)"}},activities:{condition:'this.designation in ("Co-Investigator", "Key Personnel")',type:"FlagArray",label:"Research role/activities performed for study",choices:{"Protocol development/study design":"Protocol development/study design",Recruitment:"Recruitment","Assess participant eligibility":"Assess participant eligibility","Obtain consent/parental permission/assent":"Obtain consent/parental permission/assent","Interview participants/administer surveys":"Interview participants/administer surveys","Process biological specimens":"Process biological specimens","Conduct follow-up visits":"Conduct follow-up visits","Data collection/entry/coding":"Data collection/entry/coding"}}}}}}},activities:{title:"Research Methods & Activities",description:"\n    Use the boxes provided below to provide information on all interventions and activities that are to be\n    performed in the research. Based on the selections chosen in the list of activities and components,\n    completion of additional form pages may be necessary to provide required information for IRB review.\n  ",fields:{activities:{type:"FlagArray",label:"\n        Identify and describe all interventions and interactions that are to be performed\n        solely for the research study.\n      ",description:"Check all research activities and/or components that apply.",choices:{"Anesthesia or sedation":"Anesthesia (general or local) or sedation","Audio, video, digital, or image recordings":"Audio, video, digital, or image recordings",Biohazards:"Biohazards (e.g., rDNA, infectious agents, select agents, toxins)","Biological sampling (other than blood)":"Biological sampling (other than blood)","Blood drawing":"Blood drawing","Coordinating center":"Coordinating center","Data repositories":"Data repositories (future unspecified use, including research databases)","Data, not publicly available":"Data, not publicly available","Data, publicly available":"Data, publicly available",Deception:"Deception",Devices:"Devices","Diet, exercise, or sleep modifications":"Diet, exercise, or sleep modifications","Drugs or biologics":"Drugs or biologics (including dietary supplements/ingredients)","Emergency research":"Emergency research","Focus groups":"Focus groups","Food supplements":"Food supplements","Gene transfer":"Gene transfer","Genetic testing":"Genetic testing","Internet or e-mail data collection":"Internet or e-mail data collection","Magnetic resonance imaging":"Magnetic resonance imaging (MRI)","Materials that may be considered sensitive, offensive, threatening, or degrading":"Materials that may be considered sensitive, offensive, threatening, or degrading","Non-invasive medical procedures":"Non-invasive medical procedures (e.g., EKG, Doppler)","Observation of participants":"Observation of participants (including field notes)","Oral history":"Oral history (does not include dental or medical history)",Placebo:"Placebo","Pregnancy testing":"Pregnancy testing","Umbrella Protocol":"Program Protocol (Umbrella Protocol)",Radiation:"Radiation (e.g., CT or DEXA scans, X-rays, nuclear medicine procedures)",Randomization:"Randomization","Record review":"Record review (which may include PHI)","Specimen research":"Specimen research","Stem cell research":"Stem cell research","Storage of biological materials":"Storage of biological materials (future unspecified use, including repositories)","Surgical procedures":"Surgical procedures (including biopsies)","Group surveys":"Surveys, questionnaires, or interviews (group)","One-on-one surveys":"Surveys, questionnaires, or interviews (one-on-one)",Other:"Other (Specify)"}},otherActivities:{condition:'"Other" in activities',type:"Text",label:"Specify the other activities"}}},radiation:{title:"Radiation",description:"\n    All research involving use of radioactive materials and/or radiation-producing equipment is\n    subject to review by the [Human Subject Radiation Committee](https://go.osu.edu/hsrc) (HSRC).\n    For more information, see Human Subject Radiation Committee and HRPP policy\n    [Research Involving Radiation](https://go.osu.edu/hrpppolicy41).\n\n    Complete the questions below to request inclusion of diagnostic imaging procedures involving\n    radiation (including x-ray, CT, fluoroscopy, DEXA, dental, and nuclear medicine imaging\n    (including PET or SPECT)). Therapeutic procedures involving radiation (including\n    radioactive drug therapies (e.g., radium-223, iodine-131, lutetium-177, yttrium-90) and\n    oncologic use of radiation (including external beam, gamma knife and radioactive seed implants))\n    in the proposed research should be included.\n\n    The patient-specific radiation dose for most routine imaging studies (including x-ray, CT studies,\n    fluoroscopy, DEXA, and nuclear medicine imaging) may be obtained from the [RADAR Medical Procedure\n    Radiation Dose Calculator and Consent Language Generator](https://go.osu.edu/radardoseriskcalc).\n    These calculations of effective doses are approximations. Values obtained from the calculator\n    may require adjustment during HSRC review to more accurately reflect the procedures completed\n    at Ohio State. For other assistance  contact the Office of Environmental Health and Safety\n    [(614-292-1284)](tel:614-292-1284). To request adding a procedure to the list\n    contact [ORRP](mailto:irbinfo@osu.edu).\n\n    An additional resource is available at [Effective Doses in Radiology and Diagnostic Nuclear Medicine](https://go.osu.edu/rsnaradiology).\n\n    Insert the radiation risk language generated by the dose calculator into applicable\n    consent, assent, and/or parental permission forms prior to HSRC review. If necessary,\n    the radiation risk language generated by the dose calculator should be revised to lay language.\n\n    > PLEASE NOTE: The radiation dose estimate online calculators do not provide\n    > consent form language for patient radiation dose involving therapeutic use of\n    > radiation, such as radiopharmaceutical therapy, external beam (SBRT) and radioactive\n    > seed implants. When radiation is used as therapy in research/investigational\n    > studies (not standard of care), study team should provide a brief description of the\n    > therapeutic use of radiation and estimates of radiation dose, when available.\n  ",fields:{locations:{type:"KeyArray",label:"Provide the locations where the radiologic procedure(s) will be performed",description:"If the specific location for imaging is not listed, return to the Location of Research section to add the approved locations where imaging will occur.",choices:{0:"Dodd Hall",1:"Physical Activity and Education Services building"}},radiationAgeRange:{type:"Number",label:"Specify the age(s) of participants who will receive radiation exposure."},totalRadiationParticipants:{type:"Number",label:"Provide the total number of participants (receiving radiation exposure) for whom you are seeking approval."},radiationPopulations:{type:"FlagArray",label:"Specify the participant population(s) to be included (check all that apply)",choices:{0:"Children",1:"Healthy volunteers",2:"Pregnant women",3:"Women of childbearing potential",other:"Other(s) not listed above"}},otherRadiationPopulation:{type:"Text",condition:'"other" in radiationPopulations',label:"Specify other population."},testToExcludePregnanciesFromRadiation:{type:"Key",label:"Indicate the type of pregnancy testing that will be used to exclude pregnant women.",description:"A serum pregnancy test must be used if the study involves greater than 100 mrem or the ovaries are in the radiation field.",choices:{"Serum BHCG":"Serum BHCG test",Other:"Other pregnancy test"}},otherPregnancyTestJustification:{type:"Text",condition:'testToExcludePregnanciesFromRadiation == "Other"',label:"Specify and provide justification"},hsrcReviewRequested:{type:"Key",label:"Indicate the type of HSRC review requested for this research:",choices:{Administrative:"\n          Administrative -\n          _Protocols involving effective doses of 500 mrem or less for all proposed radiologic procedures (including repeat procedures) - for all populations._\n        ",Expedited:"\n          Expedited (Subcommittee) -\n          _Protocols involving effective doses greater than 500 mrem, but not greater than 5000 mrem (5 Rem) - for all populations except children and pregnant women._\n        ","Full Committee":"\n          Full (Convened) Committee -\n          _Protocols involving children and pregnant women receiving greater than 500 mrem; and protocols involving effective doses greater than 5000 mRem (5 Rem) for all other populations_\n        "}}}}}};var InvestigatorSearchField_excluded=["endpoint"];function InvestigatorSearchField_regeneratorRuntime(){InvestigatorSearchField_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function InvestigatorSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function InvestigatorSearchField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function InvestigatorSearchField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function InvestigatorSearchField(props){props.endpoint;var _load,lookupProps=InvestigatorSearchField_objectWithoutProperties(props,InvestigatorSearchField_excluded),list=(0,data_dist_module.TY)({load:(_load=function InvestigatorSearchField_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){InvestigatorSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){InvestigatorSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(InvestigatorSearchField_regeneratorRuntime().mark((function _callee(_ref){var signal,cursor,res,json;return InvestigatorSearchField_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return signal=_ref.signal,cursor=_ref.cursor,_context.next=3,fetch(cursor||"https://pokeapi.co/api/v2/pokemon",{signal});case 3:return res=_context.sent,_context.next=6,res.json();case 6:return json=_context.sent,_context.abrupt("return",{items:json.results,cursor:json.next});case 8:case"end":return _context.stop()}}),_callee)}))),function load(_x){return _load.apply(this,arguments)})});return(0,jsx_runtime.jsx)(index_module.OU,Object.assign({},lookupProps,{items:list.items,children:function children(item){return(0,jsx_runtime.jsx)(index_module.ck,{children:item.name},item.name)}}))}InvestigatorSearchField.displayName="InvestigatorSearchField";try{InvestigatorSearchField.displayName="InvestigatorSearchField",InvestigatorSearchField.__docgenInfo={description:"",displayName:"InvestigatorSearchField",props:{iconName:{defaultValue:null,description:"Custom icon name to use. If omitted, will default to `search`",name:"iconName",required:!1,type:{name:"string"}},useItemRenderer:{defaultValue:null,description:"If specified, the Lookup will replace the text input field\nwith the renderer used for the selected `<Item/>`.\n\nThe `key` of the selected item will still be assigned\nto the input field.",name:"useItemRenderer",required:!1,type:{name:"boolean"}},endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/components/InvestigatorSearchField.tsx#InvestigatorSearchField"]={docgenInfo:InvestigatorSearchField.__docgenInfo,name:"InvestigatorSearchField",path:"src/app/components/InvestigatorSearchField.tsx#InvestigatorSearchField"})}catch(__react_docgen_typescript_loader_error){}var ApprovedResearchSiteSearchField_excluded=["endpoint"];function ApprovedResearchSiteSearchField_regeneratorRuntime(){ApprovedResearchSiteSearchField_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ApprovedResearchSiteSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ApprovedResearchSiteSearchField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ApprovedResearchSiteSearchField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ApprovedResearchSiteSearchField(props){props.endpoint;var _load,lookupProps=ApprovedResearchSiteSearchField_objectWithoutProperties(props,ApprovedResearchSiteSearchField_excluded),list=(0,data_dist_module.TY)({load:(_load=function ApprovedResearchSiteSearchField_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ApprovedResearchSiteSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ApprovedResearchSiteSearchField_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ApprovedResearchSiteSearchField_regeneratorRuntime().mark((function _callee(_ref){var signal,cursor,res,json;return ApprovedResearchSiteSearchField_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return signal=_ref.signal,cursor=_ref.cursor,_context.next=3,fetch(cursor||"https://pokeapi.co/api/v2/pokemon",{signal});case 3:return res=_context.sent,_context.next=6,res.json();case 6:return json=_context.sent,_context.abrupt("return",{items:json.results,cursor:json.next});case 8:case"end":return _context.stop()}}),_callee)}))),function load(_x){return _load.apply(this,arguments)})});return(0,jsx_runtime.jsx)(index_module.OU,Object.assign({},lookupProps,{items:list.items,children:function children(item){return(0,jsx_runtime.jsx)(index_module.ck,{children:item.name},item.name)}}))}ApprovedResearchSiteSearchField.displayName="ApprovedResearchSiteSearchField";try{ApprovedResearchSiteSearchField.displayName="ApprovedResearchSiteSearchField",ApprovedResearchSiteSearchField.__docgenInfo={description:"",displayName:"ApprovedResearchSiteSearchField",props:{iconName:{defaultValue:null,description:"Custom icon name to use. If omitted, will default to `search`",name:"iconName",required:!1,type:{name:"string"}},useItemRenderer:{defaultValue:null,description:"If specified, the Lookup will replace the text input field\nwith the renderer used for the selected `<Item/>`.\n\nThe `key` of the selected item will still be assigned\nto the input field.",name:"useItemRenderer",required:!1,type:{name:"boolean"}},endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/components/ApprovedResearchSiteSearchField.tsx#ApprovedResearchSiteSearchField"]={docgenInfo:ApprovedResearchSiteSearchField.__docgenInfo,name:"ApprovedResearchSiteSearchField",path:"src/app/components/ApprovedResearchSiteSearchField.tsx#ApprovedResearchSiteSearchField"})}catch(__react_docgen_typescript_loader_error){}const Form_stories={title:"Components/Form",component:Form,argTypes:{}};var Form_stories_options={components:{InvestigatorSearchField,ApprovedResearchSiteSearchField}},Template=function Template(args){return(0,jsx_runtime.jsxs)(Form,Object.assign({},args,{form:osu_irb_initial,options:Form_stories_options,children:[(0,jsx_runtime.jsx)(Page,{name:"team",children:(0,jsx_runtime.jsx)(Field,{name:"team"})}),(0,jsx_runtime.jsx)(Page,{name:"activities",autolayout:!0}),(0,jsx_runtime.jsx)(Page,{name:"locations",autolayout:!0})]}))};Template.displayName="Template";var Form_stories_Autolayout=function Autolayout(args){return(0,jsx_runtime.jsx)(Form,Object.assign({},args,{form:osu_irb_initial,options:Form_stories_options,autolayout:!0}))};Form_stories_Autolayout.displayName="Autolayout";var CustomizingLayout=function CustomizingLayout(args){return(0,jsx_runtime.jsx)(Form,Object.assign({},args,{form:osu_irb_initial,children:(0,jsx_runtime.jsxs)(index_module.x4,{children:[(0,jsx_runtime.jsx)(index_module.ck,{title:"Multi-Site Study",children:(0,jsx_runtime.jsxs)(Page,{name:"multiSiteStudy",children:[(0,jsx_runtime.jsx)(Field,{name:"isMultiSite"}),(0,jsx_runtime.jsx)(Field,{name:"isPILeadInvestigator"}),(0,jsx_runtime.jsx)(Field,{name:"communicationPlan"}),(0,jsx_runtime.jsx)(Field,{name:"leadInstitution"}),(0,jsx_runtime.jsx)(Field,{name:"leadInstitutionApproval"}),(0,jsx_runtime.jsx)(Field,{name:"coordinatingCenter"}),(0,jsx_runtime.jsx)(Field,{name:"isOhioStateIRBOfRecord"}),(0,jsx_runtime.jsx)(Field,{name:"siteCommunications"})]})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"Locations",children:(0,jsx_runtime.jsx)(Page,{name:"locations",children:(0,jsx_runtime.jsx)(Field,{name:"approved"})})}),(0,jsx_runtime.jsx)(index_module.ck,{title:"New Study Team Member",children:(0,jsx_runtime.jsxs)(Page,{name:"newTeamMember",children:[(0,jsx_runtime.jsx)(Field,{name:"person"}),(0,jsx_runtime.jsx)(Field,{name:"designation"}),(0,jsx_runtime.jsx)(Field,{name:"activities"})]})})]})}))};CustomizingLayout.displayName="CustomizingLayout",Template.parameters=Object.assign({storySource:{source:'(args) => (\n  <Form {...args} form={IRBInitial} options={options}>\n    {/*\n    Notice this is basically the same as an autolayout component\n    that just iterates pages/fields and dumps components.\n\n    I want combinations of both possible. From autolayout of pages,\n    autolayout of entire forms, to customization on a per page per\n    form basis to add custom content and layout configurations.\n\n    */}\n\n    <Page name="team">\n      <Field name="team" />\n    </Page>\n\n    {/* Autolayout */}\n    <Page name="activities" autolayout />\n\n    {/*\n      Explicit layout - a developer can customize content between pages.\n      However custom content may not be included in final printouts.\n    */}\n    {/* <Page name="multiSiteStudy">\n      <Field name="isTest1" />\n\n      <Field name="isMultiSite" />\n      <Field name="isPILeadInvestigator" />\n      <Field name="communicationPlan" />\n      <Field name="leadInstitution" />\n      <Field name="leadInstitutionApproval" />\n      <Field name="coordinatingCenter" />\n      <Field name="isOhioStateIRBOfRecord" />\n      <Field name="siteCommunications" />\n    </Page> */}\n\n    <Page name="locations" autolayout />\n  </Form>\n)'}},Template.parameters),Form_stories_Autolayout.parameters=Object.assign({storySource:{source:"(args) => (\n  <Form {...args} form={IRBInitial} options={options} autolayout />\n)"}},Form_stories_Autolayout.parameters),CustomizingLayout.parameters=Object.assign({storySource:{source:'(args) => (\n  <Form {...args} form={IRBInitial}>\n    <TabPanel>\n      <Item title="Multi-Site Study">\n        <Page name="multiSiteStudy">\n          <Field name="isMultiSite" />\n          <Field name="isPILeadInvestigator" />\n          <Field name="communicationPlan" />\n          <Field name="leadInstitution" />\n          <Field name="leadInstitutionApproval" />\n          <Field name="coordinatingCenter" />\n          <Field name="isOhioStateIRBOfRecord" />\n          <Field name="siteCommunications" />\n        </Page>\n      </Item>\n      <Item title="Locations">\n        <Page name="locations">\n          <Field name="approved" />\n        </Page>\n      </Item>\n      <Item title="New Study Team Member">\n        <Page name="newTeamMember">\n          <Field name="person" />\n          <Field name="designation" />\n          <Field name="activities" />\n        </Page>\n      </Item>\n    </TabPanel>\n  </Form>\n)'}},CustomizingLayout.parameters);var __namedExportsOrder=["Template","Autolayout","CustomizingLayout"]},"./src/components/Comments/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>Comments});__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var react=__webpack_require__("./node_modules/react/index.js"),index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),dist_module=(__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/@react-aria/focus/dist/module.js")),useCommentingContext=(__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./src/hooks/useCommentingContext.ts")),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useThread(id){var _useCommentingContext=(0,useCommentingContext.g)(),threads=_useCommentingContext.threads,focused=_useCommentingContext.focused,patchThread=_useCommentingContext.patchThread,patchReply=_useCommentingContext.patchReply,focusThread=_useCommentingContext.focusThread,_useState2=_slicedToArray((0,react.useState)(),2),thread=_useState2[0],setThread=_useState2[1];return(0,react.useEffect)((function(){var match=threads.find((function(t){return t.id===id}));match&&match!==thread&&setThread(match)}),[threads]),(0,react.useMemo)((function(){return{thread,focused:(null==focused?void 0:focused.id)===id,focus:function focus(){thread&&focusThread(thread.id)},updateComment:function updateComment(message){thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{message})}))},remove:function remove(){var recoverable=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{deleted:!0,recoverable})}))},recover:function recover(){thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{deleted:!1})}))},resolve:function resolve(){thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{resolved:!0})}))},reopen:function reopen(){thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{resolved:!1})}))},addReply:function addReply(message){thread&&patchThread(thread.id,(function(prev){return Object.assign({},prev,{replies:[].concat(_toConsumableArray(prev.replies),[{id:(0,v4.Z)(),person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message,date:Date.now()}])})}))},updateReply:function updateReply(id,message){thread&&patchReply(thread.id,id,(function(prev){return Object.assign({},prev,{message})}))},removeReply:function removeReply(id){var recoverable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];thread&&patchReply(thread.id,id,(function(prev){return Object.assign({},prev,{deleted:!0,recoverable})}))},recoverReply:function recoverReply(id){thread&&patchReply(thread.id,id,(function(prev){return Object.assign({},prev,{deleted:!1})}))}}}),[thread,patchThread,patchReply,focusThread])}var interactions_dist_module=__webpack_require__("./node_modules/@react-aria/interactions/dist/module.js"),dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),extension_placeholder_dist=__webpack_require__("./node_modules/@tiptap/extension-placeholder/dist/index.js"),starter_kit_dist=__webpack_require__("./node_modules/@tiptap/starter-kit/dist/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function EditableMessage(_ref){var defaultValue=_ref.defaultValue,placeholder=_ref.placeholder,_ref$autosave=_ref.autosave,autosave=void 0!==_ref$autosave&&_ref$autosave,onSave=_ref.onSave,onCancel=_ref.onCancel,focusWithinProps=(0,interactions_dist_module.L_)({onBlurWithin:function onBlurWithin(e){autosave?handleSave():handleCancel()}}).focusWithinProps,editor=(0,dist.jE)({content:defaultValue,extensions:[starter_kit_dist.Z,extension_placeholder_dist.Z.configure({placeholder})]},[]),handleSave=function handleSave(){if(editor){var content=editor.getHTML();editor.chain().clearContent().blur().run(),onSave(content)}},handleCancel=function handleCancel(){editor&&(editor.chain().clearContent().blur().run(),onCancel())};return(0,react.useEffect)((function(){editor&&editor.commands.focus("end")}),[editor]),(0,jsx_runtime.jsx)(dist_module.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,jsx_runtime.jsxs)(index_module.Kq,Object.assign({align:"stretch"},focusWithinProps,{children:[(0,jsx_runtime.jsx)(index_module.xu,{p:"xs",className:"rui-border-2",children:(0,jsx_runtime.jsx)(dist.kg,{editor})}),(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"end",children:[(0,jsx_runtime.jsx)(index_module.zx,{onPress:handleSave,children:"Save"}),(0,jsx_runtime.jsx)(index_module.zx,{onPress:handleCancel,children:"Cancel"})]})]}))})}EditableMessage.displayName="EditableMessage";try{EditableMessage.displayName="EditableMessage",EditableMessage.__docgenInfo={description:"Rich text editor with a save/cancel button visible on mount.\n\na11y\n- Focuses on the text input on mount\n- Traps keyboard focus until closed",displayName:"EditableMessage",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},autosave:{defaultValue:{value:"false"},description:"",name:"autosave",required:!1,type:{name:"boolean"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(value: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/EditableMessage.tsx#EditableMessage"]={docgenInfo:EditableMessage.__docgenInfo,name:"EditableMessage",path:"src/components/Thread/EditableMessage.tsx#EditableMessage"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");function Profile(_ref){var node=_ref.node,showRole=_ref.showRole;return(0,jsx_runtime.jsxs)(index_module.ZA,{align:"center",gap:"xxs",children:[(0,jsx_runtime.jsx)(index_module.qE,{alt:node.person.name,size:24,name:node.person.name,opicUsername:node.person.username,style:{marginLeft:-28}}),(0,jsx_runtime.jsx)(index_module.xv,{fw:"bold",fs:"sm",children:node.person.name}),showRole&&(0,jsx_runtime.jsx)(index_module.Af,{variant:"outline",c:"blue",children:node.role})]})}Profile.displayName="Profile";try{Profile.displayName="Profile",Profile.__docgenInfo={description:"",displayName:"Profile",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"any"}},showRole:{defaultValue:null,description:"",name:"showRole",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/Profile.tsx#Profile"]={docgenInfo:Profile.__docgenInfo,name:"Profile",path:"src/components/Thread/Profile.tsx#Profile"})}catch(__react_docgen_typescript_loader_error){}function ReadOnlyMessage(_ref){var message=_ref.message;return(0,jsx_runtime.jsx)(index_module.xv,{fs:"sm",children:(0,jsx_runtime.jsx)("span",{dangerouslySetInnerHTML:{__html:message}})})}ReadOnlyMessage.displayName="ReadOnlyMessage";try{ReadOnlyMessage.displayName="ReadOnlyMessage",ReadOnlyMessage.__docgenInfo={description:"",displayName:"ReadOnlyMessage",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/ReadOnlyMessage.tsx#ReadOnlyMessage"]={docgenInfo:ReadOnlyMessage.__docgenInfo,name:"ReadOnlyMessage",path:"src/components/Thread/ReadOnlyMessage.tsx#ReadOnlyMessage"})}catch(__react_docgen_typescript_loader_error){}function Reply_slicedToArray(arr,i){return function Reply_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Reply_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Reply_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Reply_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Reply_arrayLikeToArray(o,minLen)}(arr,i)||function Reply_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Reply_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Reply=react.forwardRef((function(_ref,ref){var _thread$replies,thread=_ref.thread,node=_ref.node,_useThread=useThread(thread.id),focused=_useThread.focused,updateReply=_useThread.updateReply,removeReply=_useThread.removeReply,recoverReply=_useThread.recoverReply,_useState2=Reply_slicedToArray((0,react.useState)(!1),2),isEditing=_useState2[0],setEditing=_useState2[1],isFirstFromPerson=node.person.id!==thread.person.id,found=!1;null===(_thread$replies=thread.replies)||void 0===_thread$replies||_thread$replies.forEach((function(r){found||(r.id!==node.id?r.person.id===node.person.id&&(isFirstFromPerson=!1):found=!0)}));var resolved=!!thread.resolved;return node.deleted&&node.recoverable?(0,jsx_runtime.jsxs)(index_module.xv,{p:"xs",fs:"sm",children:["Deleted reply."," ",(0,jsx_runtime.jsx)(index_module.rU,{as:"button",onClick:function onClick(){return recoverReply(node.id)},children:"(undo)"})]}):node.deleted?null:(0,jsx_runtime.jsx)(index_module.Xk,{ml:"sm",mt:"sm",children:(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",gap:0,pl:"xs",tabIndex:0,children:[(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",align:"center",children:[(0,jsx_runtime.jsx)(Profile,{node,showRole:!isFirstFromPerson}),!resolved&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_module.hU,{size:16,iconProps:{p:"xxs"},name:"edit",label:"Edit reply",onPress:function onPress(){return setEditing(!0)}}),(0,jsx_runtime.jsx)(index_module.v2,{label:"More actions",asMoreOptions:!0,onAction:function onAction(key){return"delete"===key&&removeReply(node.id),!0},children:(0,jsx_runtime.jsx)(index_module.ck,{children:"Delete reply"},"delete")})]})]}),isEditing?(0,jsx_runtime.jsx)(EditableMessage,{defaultValue:node.message,onSave:function onSave(message){updateReply(node.id,message),setEditing(!1)},onCancel:function onCancel(){return setEditing(!1)}}):(0,jsx_runtime.jsx)(ReadOnlyMessage,{message:node.message}),focused&&!isEditing&&(0,jsx_runtime.jsx)(index_module.xv,{c:"dark",fs:"xs",children:new Date(node.date).toLocaleString()})]})})}));try{Reply.displayName="Reply",Reply.__docgenInfo={description:"Render a comment as a reply to a thread",displayName:"Reply",props:{thread:{defaultValue:null,description:"",name:"thread",required:!0,type:{name:"Thread"}},node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"ThreadReply"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/Reply.tsx#Reply"]={docgenInfo:Reply.__docgenInfo,name:"Reply",path:"src/components/Thread/Reply.tsx#Reply"})}catch(__react_docgen_typescript_loader_error){}function StartReply_slicedToArray(arr,i){return function StartReply_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StartReply_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function StartReply_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StartReply_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StartReply_arrayLikeToArray(o,minLen)}(arr,i)||function StartReply_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StartReply_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StartReply(_ref){var thread=_ref.thread,_useState2=StartReply_slicedToArray((0,react.useState)(!1),2),active=_useState2[0],setActive=_useState2[1],addReply=useThread(thread.id).addReply;return(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",children:[!active&&(0,jsx_runtime.jsx)(index_module.kG,{className:"rui-border-2",p:"xs",onPress:function onPress(){return setActive(!0)},children:(0,jsx_runtime.jsx)(index_module.ZA,{children:"Reply"})}),active&&(0,jsx_runtime.jsx)(EditableMessage,{placeholder:"Reply",onSave:function onSave(message){addReply(message),setActive(!1)},onCancel:function onCancel(){return setActive(!1)},defaultValue:""})]})}StartReply.displayName="StartReply";try{StartReply.displayName="StartReply",StartReply.__docgenInfo={description:"",displayName:"StartReply",props:{thread:{defaultValue:null,description:"",name:"thread",required:!0,type:{name:"Thread"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/StartReply.tsx#StartReply"]={docgenInfo:StartReply.__docgenInfo,name:"StartReply",path:"src/components/Thread/StartReply.tsx#StartReply"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./src/react/utils.ts");function Thread_slicedToArray(arr,i){return function Thread_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Thread_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Thread_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Thread_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Thread_arrayLikeToArray(o,minLen)}(arr,i)||function Thread_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Thread_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Thread(_ref){var node=_ref.node,ref=(0,react.useRef)(null),_useThread=useThread(node.id),focused=_useThread.focused,focus=_useThread.focus,updateComment=_useThread.updateComment,resolve=_useThread.resolve,reopen=_useThread.reopen,remove=_useThread.remove,recover=_useThread.recover,_useState2=Thread_slicedToArray((0,react.useState)(!1),2),isEditing=_useState2[0],setEditing=_useState2[1],_useState4=Thread_slicedToArray((0,react.useState)(!1),2),isAutofocus=_useState4[0],setAutofocus=_useState4[1],resolved=node.resolved,replies=node.replies,isInitial=node.message.trim().length<1;(0,react.useLayoutEffect)((function(){if(ref.current){focused&&isInitial&&(setEditing(!0),setAutofocus(!0));var rect=ref.current.getBoundingClientRect();(0,utils.v)(window,rect)||window.scrollTo(rect.x,rect.y-100)}}),[focused,isInitial]),(0,react.useEffect)((function(){if(ref.current&&focused){var rect=ref.current.getBoundingClientRect();(0,utils.v)(window,rect)||ref.current.scrollIntoView({behavior:"smooth",block:"center"})}}),[focused,ref]);return node.deleted&&node.recoverable?(0,jsx_runtime.jsxs)(index_module.Xk,{withBorder:!0,p:"xs",children:["Deleted thread."," ",(0,jsx_runtime.jsx)(index_module.rU,{as:"button",onClick:recover,children:"(undo)"})]}):node.deleted?null:(0,jsx_runtime.jsx)(dist_module.MT,{children:(0,jsx_runtime.jsx)(index_module.Xk,{p:"xs",ml:"sm",ref,tabIndex:0,onClick:focus,className:(0,index_module.cx)({"rui-border-2":!0,"rui-border-light":!focused,"rui-border-blue":focused}),children:(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",gap:0,pl:"xs",children:[resolved&&(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",align:"center",children:[(0,jsx_runtime.jsx)(Profile,{node}),(0,jsx_runtime.jsxs)(index_module.ZA,{align:"center",children:[(0,jsx_runtime.jsxs)(index_module.Af,{variant:"outline",c:"green",children:[(0,jsx_runtime.jsx)(index_module.JO,{name:"check"})," resolved"]}),(0,jsx_runtime.jsx)(index_module.hU,{size:16,iconProps:{p:"xxs"},name:"rotate",label:"Reopen",onPress:reopen})]})]}),!resolved&&(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",align:"center",children:[(0,jsx_runtime.jsx)(Profile,{node,showRole:!0}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_module.hU,{size:16,iconProps:{p:"xxs"},name:"edit",label:"Edit comment",onPress:function onPress(){return setEditing(!0)}}),(0,jsx_runtime.jsxs)(index_module.v2,{label:"More actions",asMoreOptions:!0,onAction:function onAction(key){return"resolve"===key?resolve():"delete"===key&&remove(),!0},children:[(0,jsx_runtime.jsx)(index_module.ck,{children:"Link to thread"},"link"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Resolve thread"},"resolve"),(0,jsx_runtime.jsx)(index_module.ck,{children:"Delete thread"},"delete")]})]})]}),isEditing?(0,jsx_runtime.jsx)(EditableMessage,{defaultValue:node.message,autosave:isAutofocus,onSave:function onSave(message){"<p></p>"===message.trim()&&(message=""),updateComment(message),setEditing(!1),!message.length&&node.message.length<1&&remove(!1)},onCancel:function onCancel(){setEditing(!1),node.message.length<1&&node.replies.length<1&&remove(!1)}}):(0,jsx_runtime.jsx)(ReadOnlyMessage,{message:node.message}),focused&&!isEditing&&(0,jsx_runtime.jsx)(index_module.xv,{c:"dark",fs:"xs",children:new Date(node.date).toLocaleString()}),resolved&&replies.length>0&&!focused&&(0,jsx_runtime.jsx)(index_module.xv,{fs:"xs",fw:"bold",children:1===replies.length?"1 more reply":replies.length+" more replies"}),(!resolved||focused)&&(null==replies?void 0:replies.map((function(reply){return(0,jsx_runtime.jsx)(Reply,{thread:node,node:reply},reply.id)}))),!resolved&&!isInitial&&(0,jsx_runtime.jsx)(StartReply,{thread:node})]})})})}Thread.displayName="Thread";try{Thread.displayName="Thread",Thread.__docgenInfo={description:"",displayName:"Thread",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"Thread"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Thread/Thread.tsx#Thread"]={docgenInfo:Thread.__docgenInfo,name:"Thread",path:"src/components/Thread/Thread.tsx#Thread"})}catch(__react_docgen_typescript_loader_error){}function Comments_toConsumableArray(arr){return function Comments_arrayWithoutHoles(arr){if(Array.isArray(arr))return Comments_arrayLikeToArray(arr)}(arr)||function Comments_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||Comments_unsupportedIterableToArray(arr)||function Comments_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Comments_slicedToArray(arr,i){return function Comments_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Comments_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||Comments_unsupportedIterableToArray(arr,i)||function Comments_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Comments_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return Comments_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Comments_arrayLikeToArray(o,minLen):void 0}}function Comments_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Comments(){var threads=(0,useCommentingContext.g)().threads,_useState2=Comments_slicedToArray((0,react.useState)(),2),sorted=_useState2[0],setSorted=_useState2[1];return(0,react.useEffect)((function(){threads&&setSorted(Comments_toConsumableArray(threads).sort((function(a,b){var _a$context$rect$top,_a$context$rect,_b$context$rect$top,_b$context$rect;return(null!==(_a$context$rect$top=null===(_a$context$rect=a.context.rect)||void 0===_a$context$rect?void 0:_a$context$rect.top)&&void 0!==_a$context$rect$top?_a$context$rect$top:0)<(null!==(_b$context$rect$top=null===(_b$context$rect=b.context.rect)||void 0===_b$context$rect?void 0:_b$context$rect.top)&&void 0!==_b$context$rect$top?_b$context$rect$top:0)?-1:1})))}),[threads]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(index_module.X6,{level:2,children:"Comments"}),null==sorted?void 0:sorted.map((function(thread){return(0,jsx_runtime.jsx)(Thread,{node:thread},thread.id)}))]})}},"./src/components/TextEditor/comment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>Comment});__webpack_require__("./node_modules/core-js/modules/es.string.trim.js");var dist=__webpack_require__("./node_modules/@tiptap/core/dist/index.js"),react_dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),jsx_runtime=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));function CommentView(){return(0,jsx_runtime.jsxs)(react_dist.T5,{className:"comment-view",children:[(0,jsx_runtime.jsx)("span",{className:"label",children:"React Component"}),(0,jsx_runtime.jsx)("div",{className:"content",children:"hi"})]})}CommentView.displayName="CommentView";var Comment=dist.vc.create({name:"comment",addOptions:function addOptions(){return{HTMLAttributes:{}}},addAttributes:function addAttributes(){return{comment:{default:null,parseHTML:function parseHTML(el){return el.getAttribute("data-comment")},renderHTML:function renderHTML(attrs){return{"data-comment":attrs.comment}}},color:{default:"#bb0000",parseHTML:function parseHTML(el){return el.getAttribute("data-comment-color")},renderHTML:function renderHTML(attrs){return{"data-comment-color":attrs.color}}}}},parseHTML:function parseHTML(){return[{tag:"comment-view[data-comment]",getAttrs:function getAttrs(el){var _el$getAttribute;return!(null===(_el$getAttribute=el.getAttribute("data-comment"))||void 0===_el$getAttribute||!_el$getAttribute.trim())&&null}}]},renderHTML:function renderHTML(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["comment-view",(0,dist.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},onCreate:function onCreate(){},addStorage:function addStorage(){return{users:[]}},addCommands:function addCommands(){return{setComment:function setComment(comment){return function(_ref2){return _ref2.commands.setMark("comment",{comment,color:"green"})}},toggleComment:function toggleComment(){return function(_ref3){return _ref3.commands.toggleMark("comment")}},unsetComment:function unsetComment(){return function(_ref4){return _ref4.commands.unsetMark("comment")}}}},addNodeView:function addNodeView(){return(0,react_dist.fW)(CommentView)}})},"./src/hooks/useCommenting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>Context,f:()=>useCommenting});__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js");var react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/index.js"),uuid__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),react_stately__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@react-stately/data/dist/module.js"),Context=(0,react__WEBPACK_IMPORTED_MODULE_9__.createContext)({});function useCommenting(){var initialThreads=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_useListData=(0,react_stately__WEBPACK_IMPORTED_MODULE_10__.SH)({initialItems:initialThreads,getKey:function getKey(thread){return thread.id}}),items=_useListData.items,selectedKeys=_useListData.selectedKeys,getItem=_useListData.getItem,append=_useListData.append,update=_useListData.update,setSelectedKeys=_useListData.setSelectedKeys;return(0,react__WEBPACK_IMPORTED_MODULE_9__.useMemo)((function(){var focusedThreadId=selectedKeys.values().next().value;return{threads:items,focused:focusedThreadId?getItem(focusedThreadId):void 0,focusThread:function focusThread(id,target){if(target){var _thread=getItem(id);update(id,Object.assign({},_thread,{context:Object.assign({},_thread.context,{rect:target})}))}setSelectedKeys(new Set([id]))},clearFocus:function clearFocus(){console.log("clearFocus"),setSelectedKeys(new Set)},startThread:function startThread(context){var thread={id:(0,uuid__WEBPACK_IMPORTED_MODULE_11__.Z)(),person:{id:"test",name:"Chase",username:"mcmanning.1",email:"mcmanning.1@osu.edu"},role:"Test",message:"",date:Date.now(),replies:[],context};return append(thread),setSelectedKeys(new Set([thread.id])),console.log("startThread",thread),thread},patchThread:function patchThread(id,action){var thread=getItem(id);update(id,action(thread))},patchReply:function patchReply(id,replyId,action){var _thread$replies,thread=getItem(id);update(id,Object.assign({},thread,{replies:null===(_thread$replies=thread.replies)||void 0===_thread$replies?void 0:_thread$replies.map((function(r){return r.id===replyId?action(r,thread):r}))}))},updateContextRect:function updateContextRect(id,rect){var thread=getItem(id);update(id,Object.assign({},thread,{context:Object.assign({},thread.context,{rect})}))}}}),[items,selectedKeys])}},"./src/hooks/useCommentingContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>useCommentingContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useCommenting__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useCommenting.ts");function useCommentingContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_useCommenting__WEBPACK_IMPORTED_MODULE_1__._)}},"./src/react/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isInViewport(window,rect){return!(!window||!document)&&(rect.y>=window.scrollY&&rect.x>=window.scrollX&&rect.y+rect.height<=window.scrollY+window.innerHeight&&rect.x+rect.width<=window.scrollX+window.innerWidth)}__webpack_require__.d(__webpack_exports__,{v:()=>isInViewport})},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/TextEditor/collab-cursor.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/cssWithMappingToString.js"),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".ProseMirror > * + * {\n  margin-top: 0.75em;\n}\n\n.ProseMirror p.is-editor-empty:first-child::before {\n  color: #adb5bd;\n  content: attr(data-placeholder);\n  float: left;\n  height: 0;\n  pointer-events: none;\n}\n\n.collaboration-cursor__caret {\n  border-left: 1px solid #0d0d0d;\n  border-right: 1px solid #0d0d0d;\n  margin-left: -1px;\n  margin-right: -1px;\n  pointer-events: none;\n  position: relative;\n  word-break: normal;\n}\n\n.collaboration-cursor__label {\n  border-radius: 3px 3px 3px 0;\n  color: #0d0d0d;\n  font-size: 12px;\n  font-weight: 600;\n  left: -1px;\n  padding: 0.1rem 0.3rem;\n  position: absolute;\n  top: -1.4em;\n  user-select: none;\n  white-space: nowrap;\n}","",{version:3,sources:["webpack://./src/components/TextEditor/collab-cursor.css"],names:[],mappings:"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,+BAA+B;EAC/B,WAAW;EACX,SAAS;EACT,oBAAoB;AACtB;;AAEA;EACE,8BAA8B;EAC9B,+BAA+B;EAC/B,iBAAiB;EACjB,kBAAkB;EAClB,oBAAoB;EACpB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,4BAA4B;EAC5B,cAAc;EACd,eAAe;EACf,gBAAgB;EAChB,UAAU;EACV,sBAAsB;EACtB,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,mBAAmB;AACrB",sourcesContent:[".ProseMirror > * + * {\n  margin-top: 0.75em;\n}\n\n.ProseMirror p.is-editor-empty:first-child::before {\n  color: #adb5bd;\n  content: attr(data-placeholder);\n  float: left;\n  height: 0;\n  pointer-events: none;\n}\n\n.collaboration-cursor__caret {\n  border-left: 1px solid #0d0d0d;\n  border-right: 1px solid #0d0d0d;\n  margin-left: -1px;\n  margin-right: -1px;\n  pointer-events: none;\n  position: relative;\n  word-break: normal;\n}\n\n.collaboration-cursor__label {\n  border-radius: 3px 3px 3px 0;\n  color: #0d0d0d;\n  font-size: 12px;\n  font-weight: 600;\n  left: -1px;\n  padding: 0.1rem 0.3rem;\n  position: absolute;\n  top: -1.4em;\n  user-select: none;\n  white-space: nowrap;\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/TextEditor/comment.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/cssWithMappingToString.js"),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\ncomment-view[data-comment] {\n  background-color: yellow;\n}\n","",{version:3,sources:["webpack://./src/components/TextEditor/comment.css"],names:[],mappings:";AACA;EACE,wBAAwB;AAC1B",sourcesContent:["\ncomment-view[data-comment] {\n  background-color: yellow;\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./components/ExternalDocument/ExternalDocument.stories.tsx":"./src/components/ExternalDocument/ExternalDocument.stories.tsx","./components/Form/Form.stories.tsx":"./src/components/Form/Form.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[803],(()=>(__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);