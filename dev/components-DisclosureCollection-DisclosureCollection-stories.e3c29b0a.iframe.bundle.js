"use strict";(self.webpackChunk_osuresearch_ripple=self.webpackChunk_osuresearch_ripple||[]).push([[209],{"./src/components/DisclosureCollection/DisclosureCollection.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _DisclosureCollection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/DisclosureCollection/DisclosureCollection.tsx"),_Page__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Page/index.ts"),_Form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Form/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/DisclosureCollection",component:_DisclosureCollection__WEBPACK_IMPORTED_MODULE_1__.$,argTypes:{}},form={title:"Simple test form",version:"1.0",pages:{root:{title:"Root",fields:{testCollection:{type:"Collection",label:"Test collection",template:{title:"Test collection template",fields:{field1:{type:"Text",label:"Field 1"},field2:{type:"Text",label:"Field 2"}}}}}}}},Example={render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Form__WEBPACK_IMPORTED_MODULE_3__.l,{form,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Page__WEBPACK_IMPORTED_MODULE_2__.T,{name:"root",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_DisclosureCollection__WEBPACK_IMPORTED_MODULE_1__.$,{...args})})}),args:{name:"example",placeholder:"There is nothing here!"}};Example.parameters={...Example.parameters,docs:{...Example.parameters?.docs,source:{originalSource:"{\n  render: args => <Form form={form}>\n      <Page name=\"root\">\n        <DisclosureCollection {...args} />\n      </Page>\n    </Form>,\n  args: {\n    name: 'example',\n    placeholder: 'There is nothing here!'\n  }\n}",...Example.parameters?.docs?.source}}};const __namedExportsOrder=["Example"]},"./src/components/DisclosureCollection/DisclosureCollection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>DisclosureCollection});__webpack_require__("./node_modules/react/index.js");var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),useCollection=__webpack_require__("./src/hooks/useCollection.ts"),InstanceSummary=__webpack_require__("./src/components/InstanceSummary/index.ts"),usePageContext=__webpack_require__("./src/hooks/usePageContext.ts"),Field=__webpack_require__("./src/components/Field/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function InlineInstance({id,name,page}){const PageProvider=usePageContext.z.Provider;return(0,jsx_runtime.jsx)(PageProvider,{value:{name,page},children:Object.keys(page.fields).map((fieldName=>(0,jsx_runtime.jsx)(Field.g,{name:`${name}.${id}.${fieldName}`},fieldName)))})}InlineInstance.displayName="InlineInstance";try{InlineInstance.displayName="InlineInstance",InlineInstance.__docgenInfo={description:"",displayName:"InlineInstance",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"PageDefinition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DisclosureCollection/InlineInstance.tsx#InlineInstance"]={docgenInfo:InlineInstance.__docgenInfo,name:"InlineInstance",path:"src/components/DisclosureCollection/InlineInstance.tsx#InlineInstance"})}catch(__react_docgen_typescript_loader_error){}var EmptyCollection=__webpack_require__("./src/components/EmptyCollection/index.ts");function DisclosureCollection({name,isDisabled,...props}){const{items,add,remove,definition}=(0,useCollection.K)(name),ids=Object.keys(items).filter((id=>!items[id]._deleted)),onAdd=()=>{add()};return definition.summary?(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",children:[(0,jsx_runtime.jsx)(index_module.X6,{level:3,children:props.label}),props.description,ids.length>0&&(0,jsx_runtime.jsxs)(index_module.Kq,{gap:0,align:"stretch",children:[ids.map((id=>(0,jsx_runtime.jsx)(index_module.PO,{mt:"-xxs",summary:(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[(0,jsx_runtime.jsx)(InstanceSummary.$,{id,definition,responses:items[id]}),!isDisabled&&(0,jsx_runtime.jsx)(index_module.hU,{name:"xmark",label:"Remove",size:22,onPress:()=>(id=>{remove(id)})(id)})]}),children:(0,jsx_runtime.jsx)(InlineInstance,{id,name,page:definition.template})},id))),!isDisabled&&(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",mt:"sm",children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)(index_module.zx,{onPress:onAdd,children:"Add another"})]})]}),ids.length<1&&(0,jsx_runtime.jsx)(EmptyCollection.f,{placeholder:props.placeholder,onAdd})]}):(0,jsx_runtime.jsx)(index_module.bZ,{variant:"error",title:`Missing required configuration for ${name}`,children:"The DisclosureCollection component requires a summary to title each instance."})}DisclosureCollection.displayName="DisclosureCollection";try{DisclosureCollection.displayName="DisclosureCollection",DisclosureCollection.__docgenInfo={description:"",displayName:"DisclosureCollection",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},children:{defaultValue:null,description:"The contents of the collection.",name:"children",required:!0,type:{name:"any"}},previousValue:{defaultValue:null,description:"",name:"previousValue",required:!1,type:{name:"any"}},previousItems:{defaultValue:null,description:"Previous items objects in the collection.",name:"previousItems",required:!1,type:{name:"Iterable<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DisclosureCollection/DisclosureCollection.tsx#DisclosureCollection"]={docgenInfo:DisclosureCollection.__docgenInfo,name:"DisclosureCollection",path:"src/components/DisclosureCollection/DisclosureCollection.tsx#DisclosureCollection"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Form/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>_Form__WEBPACK_IMPORTED_MODULE_0__.l});var _Form__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Form/Form.tsx")},"./src/components/InstanceSummary/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>InstanceSummary});__webpack_require__("./node_modules/react/index.js");var striptags=__webpack_require__("./node_modules/striptags/src/striptags.js"),striptags_default=__webpack_require__.n(striptags),Markdown=__webpack_require__("./src/components/Markdown/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function InstanceSummary({id,definition,responses}){let summary="function"==typeof definition.summary?definition.summary(responses):definition.summary;return summary||(summary=function createDefaultSummary(page,responses){return Object.keys(page.fields).map((fieldName=>{const field=page.fields[fieldName],response=responses[fieldName];return response?"string"==typeof response||"number"==typeof response?`- ${field.label}: ${response}`:`- ${field.label}: (Cannot render type ${typeof response} yet)`:`- ${field.label}: *(no response)*`})).join("\n")}(definition.template,responses)),summary=striptags_default()(summary,["strong","em","a"]),(0,jsx_runtime.jsx)(Markdown.U,{text:summary})}InstanceSummary.displayName="InstanceSummary";try{InstanceSummary.displayName="InstanceSummary",InstanceSummary.__docgenInfo={description:"Render the summary template for a collection instance",displayName:"InstanceSummary",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"BaseField & CollectionField"}},responses:{defaultValue:null,description:"",name:"responses",required:!0,type:{name:"PageResponses"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InstanceSummary/InstanceSummary.tsx#InstanceSummary"]={docgenInfo:InstanceSummary.__docgenInfo,name:"InstanceSummary",path:"src/components/InstanceSummary/InstanceSummary.tsx#InstanceSummary"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/striptags/src/striptags.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){if("function"!=typeof Symbol){var Symbol=function(name){return name};Symbol.nonNative=!0}const STATE_PLAINTEXT=Symbol("plaintext"),STATE_HTML=Symbol("html"),STATE_COMMENT=Symbol("comment"),ALLOWED_TAGS_REGEX=/<(\w*)>/g,NORMALIZE_TAG_REGEX=/<\/?([^\s\/>]+)/;function striptags(html,allowable_tags,tag_replacement){return striptags_internal(html=html||"",init_context(allowable_tags=allowable_tags||[],tag_replacement=tag_replacement||""))}function init_context(allowable_tags,tag_replacement){return{allowable_tags:allowable_tags=function parse_allowable_tags(allowable_tags){let tag_set=new Set;if("string"==typeof allowable_tags){let match;for(;match=ALLOWED_TAGS_REGEX.exec(allowable_tags);)tag_set.add(match[1])}else Symbol.nonNative||"function"!=typeof allowable_tags[Symbol.iterator]?"function"==typeof allowable_tags.forEach&&allowable_tags.forEach(tag_set.add,tag_set):tag_set=new Set(allowable_tags);return tag_set}(allowable_tags),tag_replacement,state:STATE_PLAINTEXT,tag_buffer:"",depth:0,in_quote_char:""}}function striptags_internal(html,context){if("string"!=typeof html)throw new TypeError("'html' parameter must be a string");let allowable_tags=context.allowable_tags,tag_replacement=context.tag_replacement,state=context.state,tag_buffer=context.tag_buffer,depth=context.depth,in_quote_char=context.in_quote_char,output="";for(let idx=0,length=html.length;idx<length;idx++){let char=html[idx];if(state===STATE_PLAINTEXT)if("<"===char)state=STATE_HTML,tag_buffer+=char;else output+=char;else if(state===STATE_HTML)switch(char){case"<":if(in_quote_char)break;depth++;break;case">":if(in_quote_char)break;if(depth){depth--;break}in_quote_char="",state=STATE_PLAINTEXT,tag_buffer+=">",allowable_tags.has(normalize_tag(tag_buffer))?output+=tag_buffer:output+=tag_replacement,tag_buffer="";break;case'"':case"'":in_quote_char=char===in_quote_char?"":in_quote_char||char,tag_buffer+=char;break;case"-":"<!-"===tag_buffer&&(state=STATE_COMMENT),tag_buffer+=char;break;case" ":case"\n":if("<"===tag_buffer){state=STATE_PLAINTEXT,output+="< ",tag_buffer="";break}tag_buffer+=char;break;default:tag_buffer+=char}else if(state===STATE_COMMENT)if(">"===char)"--"==tag_buffer.slice(-2)&&(state=STATE_PLAINTEXT),tag_buffer="";else tag_buffer+=char}return context.state=state,context.tag_buffer=tag_buffer,context.depth=depth,context.in_quote_char=in_quote_char,output}function normalize_tag(tag_buffer){let match=NORMALIZE_TAG_REGEX.exec(tag_buffer);return match?match[1].toLowerCase():null}striptags.init_streaming_mode=function init_striptags_stream(allowable_tags,tag_replacement){let context=init_context(allowable_tags=allowable_tags||[],tag_replacement=tag_replacement||"");return function striptags_stream(html){return striptags_internal(html||"",context)}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function module_factory(){return striptags}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);