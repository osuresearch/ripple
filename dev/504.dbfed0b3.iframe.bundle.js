"use strict";(self.webpackChunk_osuresearch_ripple=self.webpackChunk_osuresearch_ripple||[]).push([[504],{"./src/components/Conditional/Conditional.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>Conditional});__webpack_require__("./node_modules/react/index.js");var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),regexify_string=__webpack_require__("./node_modules/regexify-string/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function FieldInfo({name,field,page}){return field?(0,jsx_runtime.jsxs)(index_module.xv,{fw:"bold",c:"warning-contrast",children:[name,(0,jsx_runtime.jsx)(index_module.UW,{contentSlot:(0,jsx_runtime.jsxs)(index_module.Kq,{p:"sm",children:[(0,jsx_runtime.jsx)(index_module.xv,{fs:"sm",children:field?.label}),(0,jsx_runtime.jsxs)(index_module.ZA,{children:[(0,jsx_runtime.jsx)(index_module.Af,{c:"error",children:"required"}),(0,jsx_runtime.jsxs)(index_module.Af,{variant:"indicator",c:"green",children:["page: ",page?.title??"Unknown"]})]})]}),children:(0,jsx_runtime.jsx)(index_module.hU,{c:"warning-contrast",label:"More information",name:"questionCircle",size:14})})]}):(0,jsx_runtime.jsxs)(index_module.xv,{c:"error",fw:"bold",children:[name,(0,jsx_runtime.jsx)(index_module.UW,{contentSlot:(0,jsx_runtime.jsx)(index_module.xv,{p:"sm",fs:"sm",children:"Field is missing from the form definition"}),children:(0,jsx_runtime.jsx)(index_module.hU,{label:"More information",name:"exclamationCircle",c:"error",size:14})})]})}FieldInfo.displayName="FieldInfo";const Container=styled_components_browser_esm.ZP.div`
  border: 2px dashed var(--rui-warning);
  position: relative;

  // Being able to fade it out would be nice. But there's
  // a lot of quirks.

  /* &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;

    opacity: 0.1;

    background: repeating-linear-gradient(
      -45deg,
      rgba(0,0,0,0),
      rgba(0,0,0,0) 10px,
      var(--rui-warning) 10px,
      var(--rui-warning) 20px
    );
  } */
`;function ConditionInformation({name,condition="",references,passed,children}){let formatted=condition;const fieldNames=Object.keys(references);if(fieldNames.length>0){const pattern=new RegExp(`(?<field>(${fieldNames.join("|").replaceAll(".","\\.")}))`,"g");formatted=(0,regexify_string.Z)({pattern,decorator:(match,index,result)=>{const[field,page]=references[match];return(0,jsx_runtime.jsx)(FieldInfo,{name:match,field,page})},input:condition})}return(0,jsx_runtime.jsxs)(Container,{children:[(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[(0,jsx_runtime.jsxs)(index_module.xv,{as:"div",bgc:"warning-shade",c:"warning-contrast",p:"xs",fs:"sm",children:[(0,jsx_runtime.jsxs)(index_module.xv,{fw:"bold",c:"warning-contrast",children:["Condition:"," "]})," ",formatted]}),(0,jsx_runtime.jsx)(index_module.Af,{m:"sm",c:passed?"success":"error",children:passed?"Visible":"Hidden"})]}),children]})}ConditionInformation.displayName="ConditionInformation";try{ConditionInformation.displayName="ConditionInformation",ConditionInformation.__docgenInfo={description:"",displayName:"ConditionInformation",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},condition:{defaultValue:{value:""},description:"",name:"condition",required:!1,type:{name:"string"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"FieldReferenceSet"}},passed:{defaultValue:null,description:"",name:"passed",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Conditional/ConditionInformation.tsx#ConditionInformation"]={docgenInfo:ConditionInformation.__docgenInfo,name:"ConditionInformation",path:"src/components/Conditional/ConditionInformation.tsx#ConditionInformation"})}catch(__react_docgen_typescript_loader_error){}var hooks=__webpack_require__("./src/hooks/index.ts");function Conditional({name,condition,children}){const{selector}=(0,hooks.CO)(),showConditions=selector((state=>state.settings.showConditions)),{passed,error,references}=(0,hooks.kY)(condition);return showConditions&&condition?(0,jsx_runtime.jsxs)(ConditionInformation,{name,references,condition,passed,children:[error&&(0,jsx_runtime.jsx)(index_module.Xk,{p:"xs",bgc:"error",c:"error-contrast",children:error}),children]}):passed?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):null}try{Conditional.displayName="Conditional",Conditional.__docgenInfo={description:"Conditionally render children based on evaluating Ripple form state.\n\nThis makes use of [filtrex](https://www.npmjs.com/package/filtrex)\nexpressions for evaluating the current form state.",displayName:"Conditional",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},condition:{defaultValue:null,description:"Condition that must be evaluated to true before children can be rendered",name:"condition",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Conditional/Conditional.tsx#Conditional"]={docgenInfo:Conditional.__docgenInfo,name:"Conditional",path:"src/components/Conditional/Conditional.tsx#Conditional"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Conditional/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>_Conditional__WEBPACK_IMPORTED_MODULE_0__.h});var _Conditional__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Conditional/Conditional.tsx")},"./src/components/Debug/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>Debug});__webpack_require__("./node_modules/react/index.js");var hooks=__webpack_require__("./src/hooks/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Debug({children}){const{selector}=(0,hooks.CO)();return selector((state=>state.settings.showDebugger))?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):null}try{Debug.displayName="Debug",Debug.__docgenInfo={description:"Render content only when teh debugger is active",displayName:"Debug",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Debug/Debug.tsx#Debug"]={docgenInfo:Debug.__docgenInfo,name:"Debug",path:"src/components/Debug/Debug.tsx#Debug"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/EmptyCollection/EmptyCollection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>EmptyCollection});var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));function EmptyCollection({placeholder,onAdd}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__.Kq,{children:[placeholder,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__.zx,{variant:"primary",onPress:onAdd,children:"Add a new entry"})]})}EmptyCollection.displayName="EmptyCollection";try{EmptyCollection.displayName="EmptyCollection",EmptyCollection.__docgenInfo={description:"",displayName:"EmptyCollection",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"ReactNode"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/EmptyCollection/EmptyCollection.tsx#EmptyCollection"]={docgenInfo:EmptyCollection.__docgenInfo,name:"EmptyCollection",path:"src/components/EmptyCollection/EmptyCollection.tsx#EmptyCollection"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/EmptyCollection/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>_EmptyCollection__WEBPACK_IMPORTED_MODULE_0__.f});var _EmptyCollection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/EmptyCollection/EmptyCollection.tsx")},"./src/components/Field/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>Field});__webpack_require__("./node_modules/react/index.js");var useRippleContext=__webpack_require__("./src/hooks/useRippleContext.ts"),Markdown=__webpack_require__("./src/components/Markdown/index.ts"),useRippleField=__webpack_require__("./src/hooks/useRippleField.tsx"),index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Debug=__webpack_require__("./src/components/Debug/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DebugWrapper=styled_components_browser_esm.ZP.div`
  position: absolute;
  left: calc(100% + 16px);
  white-space: nowrap;
`;function ValueFieldRenderer({as:Component,...props}){const{selector,formState:{errors}}=(0,useRippleContext.C)();selector((state=>state.settings.diffMode));return(0,jsx_runtime.jsxs)("div",{className:"rui-relative",children:[(0,jsx_runtime.jsx)(Debug.c,{children:(0,jsx_runtime.jsx)(DebugWrapper,{children:(0,jsx_runtime.jsxs)(index_module.Af,{variant:"indicator",c:"pink",children:["field: ",props.name]})})}),(0,jsx_runtime.jsx)(Component,{...props})]})}ValueFieldRenderer.displayName="ValueFieldRenderer";try{ValueFieldRenderer.displayName="ValueFieldRenderer",ValueFieldRenderer.__docgenInfo={description:"",displayName:"ValueFieldRenderer",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: T) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},as:{defaultValue:null,description:"",name:"as",required:!0,type:{name:"ComponentType<ValueFieldProps<T>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/ValueFieldRenderer.tsx#ValueFieldRenderer"]={docgenInfo:ValueFieldRenderer.__docgenInfo,name:"ValueFieldRenderer",path:"src/components/Field/ValueFieldRenderer.tsx#ValueFieldRenderer"})}catch(__react_docgen_typescript_loader_error){}var dist_import=__webpack_require__("./node_modules/@react-stately/data/dist/import.mjs");function ChoiceFieldRenderer({as:Component,choices,...props}){const list=(0,dist_import.SH)({initialItems:Object.keys(choices).map((c=>({name:c,label:(0,jsx_runtime.jsx)(Markdown.U,{text:choices[c]})}))),getKey:item=>item.name});return(0,jsx_runtime.jsx)(Component,{...props,items:list.items,selectedKeys:list.selectedKeys,onSelectionChange:list.setSelectedKeys,children:item=>(0,jsx_runtime.jsx)(index_module.ck,{children:item.label},item.name)})}ChoiceFieldRenderer.displayName="ChoiceFieldRenderer";try{ChoiceFieldRenderer.displayName="ChoiceFieldRenderer",ChoiceFieldRenderer.__docgenInfo={description:"",displayName:"ChoiceFieldRenderer",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},as:{defaultValue:null,description:"",name:"as",required:!0,type:{name:"ComponentType<ChoiceFieldProps<any>>"}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"ChoicesList"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/ChoiceFieldRenderer.tsx#ChoiceFieldRenderer"]={docgenInfo:ChoiceFieldRenderer.__docgenInfo,name:"ChoiceFieldRenderer",path:"src/components/Field/ChoiceFieldRenderer.tsx#ChoiceFieldRenderer"})}catch(__react_docgen_typescript_loader_error){}var Conditional=__webpack_require__("./src/components/Conditional/index.ts"),usePageContext=__webpack_require__("./src/hooks/usePageContext.ts");function Field({name,variant}){const{page}=(0,usePageContext.l)(),parts=name.split("."),localFieldName=parts[parts.length-1],definition=page.fields[localFieldName];if(!definition)throw new Error(`Could not retrieve definition for field '${localFieldName}.' Full named path was '${name}'`);const{ref,component,componentProps}=(0,useRippleField.e)(name,definition),{selector,formState:{errors}}=(0,useRippleContext.C)(),diffMode=selector((state=>state.settings.diffMode)),error=(selector((state=>state.settings.interactionMode)),errors[name]),fieldProps={name,placeholder:definition.placeholder,errorMessage:error?.message,necessityIndicator:!!definition?.required,diff:"Current"!==diffMode?diffMode:void 0},label=(0,jsx_runtime.jsx)("span",{"data-ripple-field":name,children:(0,jsx_runtime.jsx)(Markdown.U,{text:definition.label})}),description=(0,jsx_runtime.jsx)(Markdown.U,{text:definition.description});return"tableCell"!==variant?(fieldProps.label=label,fieldProps.description=description):fieldProps["aria-label"]=""+label,definition.choices?(0,jsx_runtime.jsx)(Conditional.h,{name,condition:definition.condition,children:(0,jsx_runtime.jsx)(ChoiceFieldRenderer,{ref,as:component,...fieldProps,...componentProps,choices:definition.choices})}):(0,jsx_runtime.jsx)(Conditional.h,{name,condition:definition.condition,children:(0,jsx_runtime.jsx)(ValueFieldRenderer,{ref,as:component,...fieldProps,...componentProps,value:componentProps.value})})}Field.displayName="Field";try{Field.displayName="Field",Field.__docgenInfo={description:"Ripple field",displayName:"Field",props:{name:{defaultValue:null,description:"Form field name to bind.\n\nThis can either be a simple field name or a\ndot-delimited path to a field stored within\na collection instance.\n\nExamples:\n- `fieldName`\n- `fieldName1.[collectionId1].fieldName2`",name:"name",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"tableCell"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field/Field.tsx#Field"]={docgenInfo:Field.__docgenInfo,name:"Field",path:"src/components/Field/Field.tsx#Field"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/FormProvider/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>FormProvider});__webpack_require__("./node_modules/react/index.js");var es=__webpack_require__("./node_modules/react-redux/es/index.js");const LocalStoragePersistence={save:function(responses){throw new Error("Function not implemented.")},getResponses:function(fields){throw new Error("Function not implemented.")}},ClientsideValidation={},NullLookup={keys:async()=>{throw new Error("Function not implemented.")},autocomplete:async(key,terms)=>{throw new Error("Function not implemented.")},get:async(key,id)=>{throw new Error("Function not implemented.")},all:async key=>{throw new Error("Function not implemented.")}};var hooks=__webpack_require__("./src/hooks/index.ts"),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),settings=__webpack_require__("./src/features/settings.ts");const store=(0,redux_toolkit_esm.xC)({reducer:{settings:settings.ZP}});var index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),Section=__webpack_require__("./src/components/Section/Section.tsx"),SignatureField=__webpack_require__("./src/components/SignatureField/SignatureField.tsx"),useCollection=__webpack_require__("./src/hooks/useCollection.ts"),EmptyCollection=__webpack_require__("./src/components/EmptyCollection/index.ts"),usePageContext=__webpack_require__("./src/hooks/usePageContext.ts"),Field=__webpack_require__("./src/components/Field/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function InlineInstancePage({id,name,page}){const PageProvider=usePageContext.z.Provider;return(0,jsx_runtime.jsx)(PageProvider,{value:{name,page},children:Object.keys(page.fields).map((fieldName=>(0,jsx_runtime.jsx)(Field.g,{name:`${name}.${id}.${fieldName}`},fieldName)))})}InlineInstancePage.displayName="InlineInstancePage";try{InlineInstancePage.displayName="InlineInstancePage",InlineInstancePage.__docgenInfo={description:"",displayName:"InlineInstancePage",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"PageDefinition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InlineInstancePage/InlineInstancePage.tsx#InlineInstancePage"]={docgenInfo:InlineInstancePage.__docgenInfo,name:"InlineInstancePage",path:"src/components/InlineInstancePage/InlineInstancePage.tsx#InlineInstancePage"})}catch(__react_docgen_typescript_loader_error){}function InlineCollection({name,isDisabled,...props}){const{items,add,remove,definition}=(0,useCollection.K)(name),ids=Object.keys(items).filter((id=>!items[id]._deleted)),onAdd=()=>{add()};return(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",children:[(0,jsx_runtime.jsx)(index_module.X6,{level:3,children:props.label}),props.description,ids.length>0&&(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",gap:0,children:[ids.map((id=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(index_module.ZA,{w:"100%",justify:"apart",gap:"sm",children:[(0,jsx_runtime.jsx)(InlineInstancePage,{id,name,page:definition.template}),!isDisabled&&(0,jsx_runtime.jsx)(index_module.hU,{name:"xmark",label:"Remove",size:22,onPress:()=>(id=>{remove(id)})(id)})]},id),(0,jsx_runtime.jsx)(index_module.iz,{})]}))),!isDisabled&&(0,jsx_runtime.jsxs)(index_module.ZA,{justify:"apart",children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)(index_module.zx,{onPress:onAdd,children:"Add another"})]})]}),ids.length<1&&(0,jsx_runtime.jsx)(EmptyCollection.f,{placeholder:props.placeholder,onAdd})]})}InlineCollection.displayName="InlineCollection";try{InlineCollection.displayName="InlineCollection",InlineCollection.__docgenInfo={description:"",displayName:"InlineCollection",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},children:{defaultValue:null,description:"The contents of the collection.",name:"children",required:!0,type:{name:"any"}},previousValue:{defaultValue:null,description:"",name:"previousValue",required:!1,type:{name:"any"}},previousItems:{defaultValue:null,description:"Previous items objects in the collection.",name:"previousItems",required:!1,type:{name:"Iterable<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InlineCollection/InlineCollection.tsx#InlineCollection"]={docgenInfo:InlineCollection.__docgenInfo,name:"InlineCollection",path:"src/components/InlineCollection/InlineCollection.tsx#InlineCollection"})}catch(__react_docgen_typescript_loader_error){}const defaultComponent={Text:index_module.N7,Boolean:index_module._3,Person:index_module.nv,Key:index_module.Ac,KeyArray:index_module.nb,Flag:index_module.ji,FlagArray:index_module.nb,Date:index_module.Nn,Attachment:void 0,Number:index_module.Ki,NumberRange:void 0,Signature:SignatureField.X,Section:Section.$,Collection:InlineCollection};function FormProvider({form,options={},children}){const{components,...otherOptions}=options,ctx=(0,hooks.iG)(form,{components:{...defaultComponent,...components},persistence:LocalStoragePersistence,validation:[ClientsideValidation],lookup:[NullLookup],...otherOptions});return(0,jsx_runtime.jsx)(hooks.FN.Provider,{value:ctx,children:(0,jsx_runtime.jsx)(es.zt,{store,children})})}FormProvider.displayName="FormProvider";try{FormProvider.displayName="FormProvider",FormProvider.__docgenInfo={description:"Wraps children in the Ripple context and Redux store\nused across Ripple components.",displayName:"FormProvider",props:{form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"FormDefinition"}},options:{defaultValue:{value:"{}"},description:"",name:"options",required:!1,type:{name:"Partial<RippleOptions>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormProvider/FormProvider.tsx#FormProvider"]={docgenInfo:FormProvider.__docgenInfo,name:"FormProvider",path:"src/components/FormProvider/FormProvider.tsx#FormProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Markdown/Markdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>Markdown});var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),markdown_to_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/markdown-to-jsx/dist/index.modern.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function md(templateStrings,...substitutions){let md=templateStrings.raw[0];for(let i=0;i<substitutions.length;i++)md+=String(substitutions[i])+templateStrings.raw[i+1];if(md.startsWith("\n")){const lines=md.split("\n").slice(1);if(lines.length>0){const afterIndent=lines[0].search(/[^\s]/);if(afterIndent>=0){const indent=lines[0].slice(0,afterIndent);md=lines.map((l=>l.startsWith(indent)?l.slice(indent.length):l)).join("\n")}}}return md}function ListItem({children}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.ZA,{as:"li",ml:"md",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.JO,{name:"circleFill",c:"scarlet",size:10,ml:"-md",pt:"xs"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{children})]})}function _Markdown({text}){return text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(markdown_to_jsx__WEBPACK_IMPORTED_MODULE_0__.Z,{options:{overrides:{h1:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.X6,props:{level:1}},h2:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.X6,props:{level:2}},h3:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.X6,props:{level:3}},a:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.rU},p:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.xv,props:{as:"p",pb:"xs"}},blockquote:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.xv,props:{as:"p",pl:"md"}},small:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.xv,props:{as:"p",fs:"sm",c:"dark"}},ul:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.xu,props:{as:"ul"}},li:{component:ListItem},Admonition:{component:_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.Jm}}},children:md`${text}`}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{})}ListItem.displayName="ListItem",_Markdown.displayName="_Markdown";const Markdown=react__WEBPACK_IMPORTED_MODULE_1__.memo(_Markdown);try{md.displayName="md",md.__docgenInfo={description:"Tag for trimming markdown literals",displayName:"md",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#md"]={docgenInfo:md.__docgenInfo,name:"md",path:"src/components/Markdown/Markdown.tsx#md"})}catch(__react_docgen_typescript_loader_error){}try{_Markdown.displayName="_Markdown",_Markdown.__docgenInfo={description:"",displayName:"_Markdown",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#_Markdown"]={docgenInfo:_Markdown.__docgenInfo,name:"_Markdown",path:"src/components/Markdown/Markdown.tsx#_Markdown"})}catch(__react_docgen_typescript_loader_error){}try{Markdown.displayName="Markdown",Markdown.__docgenInfo={description:"Renders text content as markdown using the lightweight\n[markdown-to-jsx](https://github.com/probablyup/markdown-to-jsx) to render\n[Research UI 5](https://github.com/osuresearch/ui) components.",displayName:"Markdown",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Markdown/Markdown.tsx#Markdown"]={docgenInfo:Markdown.__docgenInfo,name:"Markdown",path:"src/components/Markdown/Markdown.tsx#Markdown"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Markdown/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>_Markdown__WEBPACK_IMPORTED_MODULE_0__.U});var _Markdown__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Markdown/Markdown.tsx")},"./src/components/Section/Section.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Section});__webpack_require__("./node_modules/react/index.js");var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Section({label,description}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__.X6,{level:2,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_2__.fO,{id:"ripple-page-"+name,children:label})}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{children:description})]})}try{Section.displayName="Section",Section.__docgenInfo={description:"Field that represents a section heading in a form.\n\nSections, themselves, are not submittable as field data.\nThey exist only for layout purposes.\n\nIt is recommended that you prefix the field name of a section with\nan underscore.\n\nStates (validation, diffing) are ignored for sections.",displayName:"Section",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: void) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Section/Section.tsx#Section"]={docgenInfo:Section.__docgenInfo,name:"Section",path:"src/components/Section/Section.tsx#Section"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/SignatureField/SignatureField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>SignatureField});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),react_aria__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@react-aria/textfield/dist/import.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function SignatureField(props){const inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),{name,onChange,onBlur,value,isDisabled}=props,{labelProps,inputProps,descriptionProps,errorMessageProps}=(0,react_aria__WEBPACK_IMPORTED_MODULE_2__.E)(props,inputRef);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.Wi,{labelProps,descriptionProps,errorMessageProps,...props,name,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:"signature things"})})}SignatureField.displayName="SignatureField";try{SignatureField.displayName="SignatureField",SignatureField.__docgenInfo={description:"",displayName:"SignatureField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder content if the field has not been filled out.\n\nThis must be a string to support inserting placeholder\ntext within native `input` elements.",name:"placeholder",required:!1,type:{name:"string"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"invalid"'},{value:'"valid"'}]}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"ReactNode"}},necessityIndicator:{defaultValue:null,description:"",name:"necessityIndicator",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},diff:{defaultValue:null,description:"",name:"diff",required:!1,type:{name:"enum",value:[{value:'"Current"'},{value:'"Unified"'},{value:'"SideBySide"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/SignatureField/SignatureField.tsx#SignatureField"]={docgenInfo:SignatureField.__docgenInfo,name:"SignatureField",path:"src/components/SignatureField/SignatureField.tsx#SignatureField"})}catch(__react_docgen_typescript_loader_error){}},"./src/features/settings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gh:()=>toggleConditions,Hq:()=>setDiffMode,MN:()=>toggleNavigation,UF:()=>setInteractionMode,YA:()=>setLayoutMode,ZP:()=>__WEBPACK_DEFAULT_EXPORT__,f1:()=>toggleDebugger,u0:()=>toggleComments});const settingsSlice=(0,__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"settings",initialState:{value:0,showComments:!0,showConditions:!1,showNavigation:!0,showDebugger:!1,diffMode:"Current",layoutMode:"Paged",interactionMode:"Edit"},reducers:{toggleComments:(state,action)=>{state.showComments=action.payload},toggleNavigation:(state,action)=>{state.showNavigation=action.payload},toggleDebugger:(state,action)=>{state.showDebugger=action.payload},toggleConditions:(state,action)=>{state.showConditions=action.payload},setDiffMode:(state,action)=>{state.diffMode=action.payload},setLayoutMode:(state,action)=>{state.layoutMode=action.payload},setInteractionMode:(state,action)=>{state.interactionMode=action.payload},setCurrentPage:(state,action)=>{state.currentPage=action.payload}}}),{toggleComments,toggleNavigation,toggleConditions,toggleDebugger,setDiffMode,setLayoutMode,setInteractionMode,setCurrentPage}=settingsSlice.actions,__WEBPACK_DEFAULT_EXPORT__=settingsSlice.reducer},"./src/hooks/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FN:()=>useRipple.F,kY:()=>useCondition,iG:()=>useRipple.i,CO:()=>hooks_useRippleContext.C});__webpack_require__("./src/hooks/useCollection.ts");var filtrex=__webpack_require__("./node_modules/filtrex/dist/esm/filtrex.mjs"),tools=__webpack_require__("./src/tools/index.ts"),hooks_useRippleContext=__webpack_require__("./src/hooks/useRippleContext.ts");function useCondition(condition){const{form,watch,getValues}=(0,hooks_useRippleContext.C)();if(!condition)return{passed:!0,fields:[],references:{},invalidFields:[]};getValues();const ret=function evaluateCondition(form,condition,responses){if(!condition)return{passed:!0,fields:[],references:{},invalidFields:[]};const fields=(0,tools.g)(condition),references=fields.reduce(((agg,name)=>(agg[name]=(0,tools.PI)(form,name),agg)),{}),invalidFields=Object.keys(references).filter((k=>!references[k][0])),options={extraFunctions:{},constants:{pi:Math.PI,true:!0,false:!1},customProp:(propertyName,get,obj,type)=>{const value=(0,filtrex.qu)(propertyName,get,obj,type);return"0"!==value&&("1"===value||value)}};let error,filter,passed=!1;try{filter=(0,filtrex.UV)(condition,options)}catch(e){error=e?"Compilation error: "+e.toString():"Compilation error: Unhandled error",passed=!1,filter=void 0}if(filter){const result=filter(responses);!0===result||!1===result?passed=result:(passed=!1,error="Execution error: "+(result?.toString()??"Unknown error"))}return{passed,error,fields,references,invalidFields}}(form,condition,getValues());watch(ret.fields);return ret}__webpack_require__("./src/hooks/useFieldComponent.tsx");__webpack_require__("./src/hooks/usePageContext.ts");var useRipple=__webpack_require__("./src/hooks/useRipple.ts");__webpack_require__("./src/hooks/useRippleField.tsx"),__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js");function useRippleForm(props){const{register:rhfRegister,...rest}=useForm({...props,mode:"onBlur"});return useMemo((()=>({save:async()=>{},register:(name,options)=>{const registerProps=rhfRegister(name,options);let error,defaultValue;return rest.formState.errors&&(error=rest.formState.errors[registerProps.name]),rest.formState.defaultValues&&(defaultValue=rest.formState.defaultValues[registerProps.name]),options?.valueAsDate&&defaultValue&&"string"==typeof defaultValue&&(defaultValue=parseDate(defaultValue)),{name:registerProps.name,isDisabled:registerProps.disabled,isRequired:registerProps.required,defaultValue,ref:registerProps.ref,onChange:value=>{options?.valueAsDate&&"string"!=typeof value&&value&&(value=value.toString()),registerProps.onChange({target:{name:registerProps.name,value},type:"change"})},errorMessage:error?_jsx(_Fragment,{children:error.message}):void 0}},...rest})),[rhfRegister])}try{useRippleForm.displayName="useRippleForm",useRippleForm.__docgenInfo={description:"Extension of React Hook Form 7 to ease integration with RUI Field components.\n\nThis customizes `value` and `onChange` handling on a per-component basis to\nconform to RUI's platform",displayName:"useRippleForm",props:{mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"onChange"'},{value:'"onBlur"'},{value:'"all"'},{value:'"onSubmit"'},{value:'"onTouched"'}]}},reValidateMode:{defaultValue:null,description:"",name:"reValidateMode",required:!1,type:{name:"enum",value:[{value:'"onChange"'},{value:'"onBlur"'},{value:'"onSubmit"'}]}},defaultValues:{defaultValue:null,description:"",name:"defaultValues",required:!1,type:{name:"AsyncDefaultValues<TFieldValues> | { [x: string]: string | number | boolean | (string)[] | (number)[] | { [x: string]: { [x: string]: string | ... 5 more ... | undefined; } | undefined; } | undefined; } | undefined"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"FormResponses"}},resetOptions:{defaultValue:null,description:"",name:"resetOptions",required:!1,type:{name:"Partial<{ keepDirtyValues: boolean; keepErrors: boolean; keepDirty: boolean; keepValues: boolean; keepDefaultValues: boolean; keepIsSubmitted: boolean; keepTouched: boolean; keepIsValid: boolean; keepSubmitCount: boolean; }>"}},resolver:{defaultValue:null,description:"",name:"resolver",required:!1,type:{name:"Resolver<TFieldValues, TContext>"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"TContext"}},shouldFocusError:{defaultValue:null,description:"",name:"shouldFocusError",required:!1,type:{name:"boolean"}},shouldUnregister:{defaultValue:null,description:"",name:"shouldUnregister",required:!1,type:{name:"boolean"}},shouldUseNativeValidation:{defaultValue:null,description:"",name:"shouldUseNativeValidation",required:!1,type:{name:"boolean"}},criteriaMode:{defaultValue:null,description:"",name:"criteriaMode",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"firstError"'}]}},delayError:{defaultValue:null,description:"",name:"delayError",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useRippleForm.tsx#useRippleForm"]={docgenInfo:useRippleForm.__docgenInfo,name:"useRippleForm",path:"src/hooks/useRippleForm.tsx#useRippleForm"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useCollection.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>useCollection});var uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_usePageContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/usePageContext.ts"),_useRippleContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useRippleContext.ts");function useCollection(name){const ctx=(0,_useRippleContext__WEBPACK_IMPORTED_MODULE_1__.C)(),{page}=(0,_usePageContext__WEBPACK_IMPORTED_MODULE_0__.l)();if(!page)throw new Error("Cannot call useCollection outside of a Ripple Page");const parts=name.split("."),localFieldName=parts[parts.length-1],definition=page.fields[localFieldName];if(!definition)throw new Error(`Could not retrieve definition for collection '${localFieldName}.' Full named path was '${name}'`);if(!definition.template)throw new Error(`Missing template for collection field '${name}`);const template=definition.template;return{items:ctx.watch(name)??{},definition,add:()=>{const id=(0,uuid__WEBPACK_IMPORTED_MODULE_2__.Z)();return ctx.setValue(`${name}.${id}`,{...Object.keys(template.fields).reduce(((agg,name)=>(agg[name]=null,agg)),{})}),id},remove:id=>{ctx.setValue(`${name}.${id}._deleted`,!0)}}}},"./src/hooks/useFieldComponent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>useFieldComponent});__webpack_require__("./node_modules/react/index.js");var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),_useRippleContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useRippleContext.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InvalidField(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.bZ,{variant:"error",title:`Missing field component for '${props.name}'`,children:props.error})}function useFieldComponent(def){const{options}=(0,_useRippleContext__WEBPACK_IMPORTED_MODULE_1__.C)();let component,props={};return props=def.component?.props??{},def.component?.name?options.components[def.component.name]?component=options.components[def.component.name]:(component=InvalidField,props={error:`No configured component for field type '${def.component.name}'`}):component=options.components[def.type],component||(component=InvalidField,props={error:`Could not locate a component for field type '${def.type}'`}),[component,props]}InvalidField.displayName="InvalidField";try{useFieldComponent.displayName="useFieldComponent",useFieldComponent.__docgenInfo={description:"Construct a React component to render the input `FieldDefinition`.\n\nIf a component cannot be created, a placeholder component will be\nprovided to alert the end user.",displayName:"useFieldComponent",props:{label:{defaultValue:null,description:"Primary label for the field.",name:"label",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"Additional secondary help text to display alongside the field.\n\nDepending on how field components are rendered, this may appear\neither under the field input or in a popover dialog.",name:"description",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Content to display when there is no response to the field.\n\nDepending on the implementing component for the field, this\nmay or may not actually support Markdown format.",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:null,description:'Simple "is this field required" validation rule.\n\nIf the value is a string, the error message presented for the\nfield will contain the message.\n\nIf a string is provided, the field is checked for any response\n(non-null and non-empty value). If no response is provided,\nthe string will be used as the validation error message.\n\nIf omitted, the response is optional.',name:"required",required:!1,type:{name:"string"}},computed:{defaultValue:null,description:"If true, this field is computed from the responses in other\nfields and cannot be modified by the submitter.",name:"computed",required:!1,type:{name:"boolean"}},validators:{defaultValue:null,description:"Frontend and backend validation rules for this field.\n\nSome validation rules may help block saving the field's response\nuntil valid, and some may be passive validation that prevents the\nform in its entirety from saving but not an individual response.",name:"validators",required:!1,type:{name:"Validator[]"}},condition:{defaultValue:null,description:"Condition for displaying this field based on existing responses",name:"condition",required:!1,type:{name:"string"}},example:{defaultValue:null,description:"Example response value for demonstrating this field",name:"example",required:!1,type:{name:"any"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"Text"'},{value:'"Boolean"'},{value:'"Number"'},{value:'"NumberRange"'},{value:'"Flag"'},{value:'"FlagArray"'},{value:'"Key"'},{value:'"KeyArray"'},{value:'"Person"'},{value:'"Date"'},{value:'"Attachment"'},{value:'"Signature"'},{value:'"Collection"'},{value:'"Section"'}]}},choices:{defaultValue:null,description:"",name:"choices",required:!1,type:{name:"ChoicesList"}},component:{defaultValue:null,description:"Optional RUI field component to render.\n\nIf omitted Ripple will attempt to intelligently\ndetermine which RUI field component to render.\nOptional component to render.\n\nIf omitted, Ripple will use the default collection component.\nOptional component to render.\n\nIf omitted, Ripple will use the default section component.",name:"component",required:!1,type:{name:"ReactFieldComponent"}},template:{defaultValue:null,description:"Page definition to instantiate for new instances",name:"template",required:!1,type:{name:"PageDefinition"}},summary:{defaultValue:null,description:"Summary content for each entry in the collection.\n\nThis supports both markdown and Mustache for templating.\n\nMustache variables will be derived from the field responses\nwithin each instance being summarized.",name:"summary",required:!1,type:{name:"string | MarkdownFactory"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useFieldComponent.tsx#useFieldComponent"]={docgenInfo:useFieldComponent.__docgenInfo,name:"useFieldComponent",path:"src/hooks/useFieldComponent.tsx#useFieldComponent"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/usePageContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>usePageContext,z:()=>PageContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const PageContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function usePageContext(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(PageContext);if(!ctx)throw new Error("Cannot call usePageContext outside of a Ripple Page context");return ctx}},"./src/hooks/useRipple.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>RippleContext,i:()=>useRipple});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_tools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/tools/index.ts"),react_hook_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs");const RippleContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function useRipple(form,options){const{...otherOptions}=options,rform=(0,react_hook_form__WEBPACK_IMPORTED_MODULE_3__.cI)({mode:"onBlur"});return{form,options,dispatch:react_redux__WEBPACK_IMPORTED_MODULE_1__.I0,selector:react_redux__WEBPACK_IMPORTED_MODULE_1__.v9,getNextPage:page=>(0,_tools__WEBPACK_IMPORTED_MODULE_2__.KZ)(form,page),getPreviousPage:page=>(0,_tools__WEBPACK_IMPORTED_MODULE_2__.Os)(form,page),...rform}}},"./src/hooks/useRippleContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>useRippleContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useRipple__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useRipple.ts");function useRippleContext(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_useRipple__WEBPACK_IMPORTED_MODULE_1__.F);if(!ctx)throw new Error("Cannot call useRippleContext outside of a Ripple context");return ctx}},"./src/hooks/useRippleField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>useRippleField});var _osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),react_hook_form__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),_useRippleContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/useRippleContext.ts"),_useFieldComponent__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useFieldComponent.tsx");function useRippleField(name,def){const{selector,setValue,control}=(0,_useRippleContext__WEBPACK_IMPORTED_MODULE_0__.C)(),[component,props]=(0,_useFieldComponent__WEBPACK_IMPORTED_MODULE_1__.L)(def),interactionMode=selector((state=>state.settings.interactionMode)),{field:{ref,onChange,onBlur,value}}=(0,react_hook_form__WEBPACK_IMPORTED_MODULE_2__.bc)({name,control});return{ref,component,componentProps:(0,_osuresearch_ui__WEBPACK_IMPORTED_MODULE_3__.dG)(props,{onBlur,onChange,value,isDisabled:"Edit"!==interactionMode})}}},"./src/tools/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PI:()=>findField,r0:()=>getCollectionFields,KZ:()=>getNextPage,Os:()=>getPreviousPage,g:()=>getReferencedFields,KD:()=>normalizeFieldPath});var filtrex=__webpack_require__("./node_modules/filtrex/dist/esm/filtrex.mjs");function getReferencedFields(condition){return function getUsedVariables(expression,data){const usedVars=[],options={constants:{pi:Math.PI,true:!0,false:!1},customProp:(propertyName,get,obj,type)=>(usedVars.push(propertyName),!1)};return(0,filtrex.UV)(expression,options)(data),usedVars}(condition.replaceAll(" and "," or ").replaceAll(" not "," "),{})}function findField(form,name){for(const page in form.pages)if(Object.hasOwn(form.pages[page].fields,name))return[form.pages[page].fields[name],form.pages[page]];return[void 0,void 0]}function getCollectionFields(page){return Object.keys(page.fields).reduce(((agg,name)=>("Collection"===page.fields[name].type&&agg.push(name),agg)),[])}function getNextPage(form,page){const keys=Object.keys(form.pages),idx=keys.indexOf(page);if(idx>-1&&idx<keys.length-1)return{name:keys[idx+1],definition:form.pages[keys[idx+1]]}}function getPreviousPage(form,page){const keys=Object.keys(form.pages),idx=keys.indexOf(page);if(idx>-1&&idx>0)return{name:keys[idx-1],definition:form.pages[keys[idx-1]]}}function normalizeFieldPath(location,jsonPath){const responseRelativePath=function fieldToPath(jsonPath){const parts=jsonPath.split(".");let path="";for(;parts.length;){const fieldName=parts.shift(),instanceId=parts.shift();path+="/"+fieldName,instanceId&&(path+="."+instanceId)}return path}(jsonPath).split("/");responseRelativePath.shift();const locationPath=location.pathname.split("/"),overlap=responseRelativePath[0];for(;locationPath.length&&locationPath[locationPath.length-1]!==overlap;)locationPath.pop();return locationPath.pop(),[...locationPath,...responseRelativePath].join("/")}}}]);
//# sourceMappingURL=504.dbfed0b3.iframe.bundle.js.map